(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{4373:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(6626);let r=(0,a.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},4994:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(3948)}])},2853:function(e,s,t){"use strict";t.d(s,{f:function(){return Calendar}});var a=t(2322);t(2784);var r=t(6097),i=t(6839),l=t(2072),n=t(6229),o=t(9276);let Calendar=e=>{let{className:s,classNames:t,showOutsideDays:c=!0,...d}=e;return(0,a.jsx)(l._W,{showOutsideDays:c,className:(0,n.cn)("p-3 font-secondary",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,n.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-primary ","range"===d.mode?"[&:has(>.day-range-end)]:rounded-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:"h-9 w-9 p-0 font-normal aria-selected:opacity-100 rounded-md",day_selected:"bg-secondary text-white",day_today:"border-[1px] border-black",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-primary aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:()=>(0,a.jsx)(r.Z,{className:"h-4 w-4"}),IconRight:()=>(0,a.jsx)(i.Z,{className:"h-4 w-4"})},...d})};Calendar.displayName="Calendar"},6391:function(e,s,t){"use strict";t.d(s,{Zb:function(){return l}});var a=t(2322),r=t(2784),i=t(6229);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-xxl bg-card text-card-foreground shadow-default",t),...r})});l.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight text-neutral-400",t),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("h-full p-6 pt-0",t),...r})});d.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)(" flex items-center p-6 pt-0",t),...r})});m.displayName="CardFooter"},3040:function(e,s,t){"use strict";t.d(s,{J2:function(){return n},xo:function(){return o},yk:function(){return c}});var a=t(2322),r=t(2784),i=t(5366),l=t(6229);let n=i.fC,o=i.xz,c=(0,r.forwardRef)((e,s)=>{let{className:t,align:r="center",sideOffset:n=4,...o}=e;return(0,a.jsx)(i.h_,{children:(0,a.jsx)(i.VY,{ref:s,align:r,sideOffset:n,className:(0,l.cn)("z-50 w-72 rounded-md bg-popover p-4 text-popover-foreground shadow-md outline-none animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o})})});c.displayName=i.VY.displayName},2863:function(e,s,t){"use strict";var a=t(2322),r=t(2784),i=t(929),l=t(6229);let n=(0,i.j)("flex h-14 w-full rounded-md px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-secondary disabled:cursor-not-allowed disabled:opacity-50 placeholder:text-gray/800 placeholder:text-sm focus-visible:text-secondary",{variants:{variant:{default:"bg-white",gray:"bg-gray/200"}},defaultVariants:{variant:"default"}}),o=(0,i.j)("absolute left-3 top-2 z-10 text-sm not-italic group-focus-within:text-secondary",{variants:{labelVariant:{default:"text-gray/600",black:"text-primary-foreground"}},defaultVariants:{labelVariant:"default"}}),c=(0,r.forwardRef)((e,s)=>{let{className:t,variant:r,labelVariant:i,type:c,icon:d,withLabelText:m,...u}=e;return(0,a.jsxs)("div",{className:"relative",children:[d&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:d}),(0,a.jsxs)("div",{className:"group",children:[m&&(0,a.jsx)("label",{className:(0,l.cn)(o({labelVariant:i})),children:m}),(0,a.jsx)("input",{type:c,className:(0,l.cn)(n({variant:r}),d&&"pl-10",m&&"h-[66px] pt-8",t),ref:s,...u})]})]})});c.displayName="TextInput",s.Z=c},4830:function(e,s,t){"use strict";t.d(s,{_v:function(){return d},aJ:function(){return c},pn:function(){return n},u:function(){return o}});var a=t(2322),r=t(2784),i=t(535),l=t(6229);let n=i.zt,o=i.fC,c=i.xz,d=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,a.jsx)(i.VY,{ref:s,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})});d.displayName=i.VY.displayName},4429:function(e,s,t){"use strict";t.d(s,{U:function(){return InformationModal}});var a=t(2322);t(2784);var r=t(929),i=t(428),l=t(1267),n=t(2428),o=t(8590),c=t(6068);let d=(0,r.j)("flex flex-col",{variants:{size:{big:"w-[calc(100%_-_300px)]",small:"lg:w-[calc(100%_-_650px)] w-[calc(100%_-_200px)]",xsmall:"w-[calc(100%_-_200px)] max-w-[495px]"}},defaultVariants:{size:"small"}}),HeaderShimmer=()=>(0,a.jsx)(i.fK,{className:"mb-5",children:(0,a.jsx)(i.$N,{className:"font-medium text-secondary",children:(0,a.jsx)(c.O,{className:"h-[40px] min-w-[150px] max-w-[275px]"})})}),InformationModal=e=>{let{triggerButton:s,title:t,description:r,children:c,withCloseButton:m=!0,size:u,open:x,setOpen:f,loading:p}=e;return(0,a.jsxs)(i.Vq,{open:x,onOpenChange:f,children:[(0,a.jsx)(i.hg,{asChild:!0,children:s}),(0,a.jsxs)(i.cZ,{withCloseButton:m,className:d({size:u}),children:[p?(0,a.jsx)(HeaderShimmer,{}):(0,a.jsxs)(i.fK,{className:"mb-5 px-4",children:[(0,a.jsx)(i.$N,{className:"font-medium text-secondary",children:(0,a.jsx)(l.Z,{className:"leading-6",children:t})}),r&&(0,a.jsx)(i.Be,{className:"text-xs",children:r})]}),(0,a.jsx)(o.Z,{className:"border-dashed border-gray/300"}),(0,a.jsx)(n.x,{children:(0,a.jsx)("div",{className:"h-fit max-h-[60vh] min-h-[100px] p-4",children:c})})]})]})}},5986:function(e,s,t){"use strict";var a=t(2322),r=t(2784),i=t(7911),l=t(2863);let n=(0,r.forwardRef)((e,s)=>{let{className:t,error:r,...n}=e;return(0,a.jsxs)("div",{className:t,children:[(0,a.jsx)(l.Z,{ref:s,...n,className:"h-full"}),(0,a.jsx)(i.Z,{errorMessage:r})]})});n.displayName="TextInputWithError",s.Z=n},8147:function(e,s,t){"use strict";t.d(s,{Z:function(){return TableFilterBar}});var a=t(2322),r=t(8880),i=t(2174),l=t(2863),n=t(2784),o=t(7755),c=t(6026),d=t(9276),m=t(2853),u=t(3040),x=t(6229);let DatePickerWithRange=e=>{let{className:s,setDate:t}=e,[r,l]=n.useState(void 0),f=(0,i.useTranslations)();return(0,a.jsx)("div",{className:(0,x.cn)("grid gap-2",s),children:(0,a.jsxs)(u.J2,{children:[(0,a.jsx)(u.xo,{asChild:!0,children:(0,a.jsxs)(d.z,{id:"date",variant:"outline",className:(0,x.cn)("h-full justify-start text-left font-normal",!r&&"text-gray/600"),children:[(0,a.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),(null==r?void 0:r.from)?r.to?(0,a.jsxs)(a.Fragment,{children:[(0,o.Z)(r.from,"dd/LL/yyyy")," - ",(0,o.Z)(r.to,"dd/LL/yyyy")]}):(0,o.Z)(r.from,"dd/LL/yyyy"):(0,a.jsx)("span",{children:f("analyze.initiativeManagement.pickDateRange")})]})}),(0,a.jsx)(u.yk,{className:"w-auto p-0",align:"start",onInteractOutside:()=>t(r),children:(0,a.jsx)(m.f,{initialFocus:!0,mode:"range",defaultMonth:null==r?void 0:r.from,selected:r,onSelect:l})})]})})};var TableFilterBar=e=>{let{queryFilter:s,dateFilter:t,searchPlaceholder:n}=e,o=(0,i.useTranslations)();return(0,a.jsxs)("div",{className:"flex w-full flex-col gap-4 rounded-2xl rounded-b-none md:flex-row",children:[s&&(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(l.Z,{placeholder:null!=n?n:o("filter.search"),className:"h-10 border border-gray_24 placeholder:text-cancel",type:"text",onChange:e=>s.setFilter(e.target.value),icon:(0,a.jsx)(r.Z,{size:12,className:"text-cancel"}),defaultValue:s.filter})}),t&&(0,a.jsx)(DatePickerWithRange,{className:"h-10 min-w-[276px]",setDate:t.setFilter})]})}},3948:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return R},default:function(){return B}});var a=t(2322),r=t(2784),i=t(4373),l=t(2174),n=t(951),o=t(7687),c=t(857),d=t(261),m=t(2171),u=t(6229),x=t(9276),f=t(6391),p=t(1267),g=t(2428),h=t(8590),v=t(6068),j=t(8147),w=t(4429);let Shimmer=()=>(0,a.jsx)(a.Fragment,{children:Array.from({length:5}).map((e,s)=>(0,a.jsx)("div",{className:"flex h-9 items-center px-3",children:(0,a.jsx)(v.O,{className:"h-5 w-full"})},s))}),KpiInformationModal=e=>{let{kpi:s}=e,[t,i]=(0,r.useState)(!1),o=(0,l.useLocale)();return(0,a.jsx)(w.U,{triggerButton:(0,a.jsx)("i",{children:(0,a.jsx)(n.ocf,{className:"hover:scale-[1.1] hover:bg-transparent hover:text-secondary",size:20})}),open:t,setOpen:i,title:(0,c.i)(s.name,o),children:(0,a.jsx)("p",{className:"text-justify",children:(0,c.i)(s.description,o)})})};var molecules_HomePageKpisSelector=()=>{var e;let s=(0,l.useTranslations)(),t=(0,l.useLocale)(),v=o.h.useContext(),[w,y]=(0,r.useState)(""),{data:N,isLoading:b}=o.h.settings.kpis.useQuery(),_=null!==(e=null==N?void 0:N.userKpis.map(e=>e.id))&&void 0!==e?e:[],P=null==N?void 0:N.kpisByCategory.filter(e=>e.kpis.some(e=>(0,d.Ue)((0,c.i)(e.name,t)).includes((0,d.Ue)(w)))).map(e=>({categoryKey:e.categoryKey,kpis:e.kpis.filter(e=>(0,d.Ue)((0,c.i)(e.name,t)).includes((0,d.Ue)(w)))})),{mutate:z}=o.h.settings.removeKpi.useMutation({onSuccess:async()=>(await v.settings.kpis.invalidate(),(0,m.Am)({title:s("selectHomePageKpis.removeKpiSuccess")})),onError:()=>(0,m.Am)({title:s("selectHomePageKpis.removeKpiError")})}),{mutate:S}=o.h.settings.addKpi.useMutation({onSuccess:async()=>(await v.settings.kpis.invalidate(),(0,m.Am)({title:s("selectHomePageKpis.addKpiSuccess")})),onError:()=>(0,m.Am)({title:s("selectHomePageKpis.addKpiError")})}),{mutate:C}=o.h.settings.reset.useMutation({onSuccess:async()=>(await v.settings.kpis.invalidate(),(0,m.Am)({title:s("selectHomePageKpis.resetKpisSuccess")})),onError:()=>(0,m.Am)({title:s("selectHomePageKpis.resetKpisError")})}),onRemoveClick=e=>_.length>1?z({kpiId:e}):(0,m.Am)({variant:"destructive",title:s("selectHomePageKpis.removeLastKpiError")}),onAddClick=e=>{(0,d.VL)(e,_)||S({kpiId:e})};return(0,a.jsxs)(f.Zb,{className:"flex h-full flex-col gap-3 p-4",children:[(0,a.jsx)("div",{className:"w-fit",children:(0,a.jsx)(p.Z,{className:"ml-1",children:s("selectHomePageKpis.title")})}),(0,a.jsxs)("div",{className:"flex h-[calc(100%_-_35px)] flex-col gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(j.Z,{queryFilter:{filter:w,setFilter:y}})}),(0,a.jsx)(x.z,{variant:"outline",className:"h-10 gap-1 text-gray/500 hover:border-secondary hover:text-secondary ",onClick:()=>C(),children:(0,a.jsx)("p",{className:"text-xs font-medium",children:s("selectHomePageKpis.clear")})})]}),(0,a.jsx)(g.x,{className:"h-full rounded-md border border-gray_24 py-1",children:(0,a.jsx)("div",{className:"flex flex-col",children:b?(0,a.jsx)(Shimmer,{}):null==P?void 0:P.map((e,l)=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("div",{className:"px-3 py-2",children:(0,a.jsx)("p",{className:"font-semibold",children:s("kpiCategory.".concat(e.categoryKey))})}),e.kpis.map(e=>(0,a.jsxs)("div",{className:(0,u.cn)("flex h-9 items-center justify-between px-3 hover:cursor-pointer hover:bg-gray/200",e.enabled?"text-black":"text-gray/400"),onClick:()=>onAddClick(e.id),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-[18px]",children:(0,d.VL)(e.id,_)&&(0,a.jsx)(n.bzc,{size:16})}),(0,a.jsx)("p",{children:(0,c.i)(e.name,t)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.VL)(e.id,_)&&(0,a.jsx)(x.z,{variant:"ghost",className:(0,u.cn)("p-0 transition-all hover:scale-[1.1] hover:bg-transparent hover:text-secondary",e.enabled?"text-black":"text-gray/400"),onClick:s=>{s.stopPropagation(),onRemoveClick(e.id)},children:(0,a.jsx)(i.Z,{size:16})}),(0,a.jsx)(KpiInformationModal,{kpi:e})]})]},e.id)),l!==P.length-1&&(0,a.jsx)(h.Z,{className:"border-dashed border-gray/300"})]},l))})})]})]})},y=t(8883),N=t(3955),b=t(195),_=t(929);let P=(0,_.j)("inline-flex items-center rounded-md border px-2.5 py-1.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-ring leading-4 focus:ring-offset-2 text-white border-transparent",{variants:{variant:{default:"bg-gray/800",secondary:"bg-secondary",success:"bg-success",warning:"bg-warning text-gray/800",error:"bg-error",inactive:"bg-gray_32"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,u.cn)(P({variant:t}),s),...r})}var z=t(3115),S=t(5986);let C=b.z.enum(["pendingInvitation","userInOtherOrganization","userInThisOrganization"]),DeleteUserModal=e=>{let{userId:s}=e,t=(0,l.useTranslations)(),i=o.h.useContext(),[n,c]=(0,r.useState)(!1),{mutate:d}=o.h.invitations.removeUserFromOrganization.useMutation({async onSuccess(){await i.invitations.getUsers.invalidate(),(0,m.Am)({title:t("usersList.deleteUserModal.success")})},onError(){(0,m.Am)({title:t("usersList.deleteUserModal.error")})}});return(0,a.jsx)(z.u,{triggerButton:(0,a.jsx)("button",{className:"text-sm text-gray/500",children:t("usersList.removeAccess")}),open:n,setOpen:c,title:t("usersList.deleteUserModal.title"),onConfirm:()=>d({userId:s}),size:"xsmall",children:(0,a.jsx)("p",{className:"my-5",children:t("usersList.deleteUserModal.description")})})};var molecules_UsersList=e=>{var s;let{userId:t}=e,i=(0,l.useTranslations)(),n=o.h.useContext(),[c,d]=(0,r.useState)(!1),{data:u,isLoading:j}=o.h.invitations.getUsers.useQuery(),{mutate:_,isLoading:P}=o.h.invitations.inviteUser.useMutation({onError(e){let s=C.safeParse(e.message);if(s.success)return(0,m.Am)({variant:"destructive",title:i("usersList.inviteError.".concat(s.data))});(0,m.Am)({variant:"destructive",title:i("usersList.inviteError.genericError")})},async onSuccess(){await n.invitations.getUsers.invalidate(),(0,m.Am)({variant:"default",title:i("usersList.inviteSuccess")}),d(!1),I()}}),z=b.z.object({email:b.z.string().min(1,i("errors.required")).email(i("errors.invalid"))}),{register:k,handleSubmit:L,formState:{errors:U},reset:I}=(0,N.cI)({resolver:(0,y.F)(z)});return(0,a.jsxs)(f.Zb,{className:"flex h-full flex-col gap-2 p-4",children:[(0,a.jsx)(p.Z,{children:i("usersList.title")}),(0,a.jsx)("div",{className:"h-[calc(100%_-_80px)] rounded-md bg-gray/200 py-2 pl-4 pr-2",children:(0,a.jsxs)(g.x,{className:"h-full",children:[(0,a.jsx)("div",{className:"flex flex-col gap-2",children:j?Array.from({length:8}).map((e,s)=>(0,a.jsx)(v.O,{className:"h-5 w-full bg-white"},s)):null==u?void 0:u.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center gap-1 whitespace-nowrap text-sm",children:[e.firstName&&"".concat(e.firstName," ").concat(null!==(s=e.lastName)&&void 0!==s?s:""),(0,a.jsxs)("span",{className:"text-xs text-gray/500",children:[" ",e.email]})]},e.id)})}),(0,a.jsx)(g.B,{orientation:"horizontal"})]})}),(0,a.jsxs)(w.U,{title:i("usersList.invite"),open:c,setOpen:d,triggerButton:(0,a.jsx)(x.z,{className:"w-full",children:i("usersList.editAccesses")}),children:[(0,a.jsxs)("div",{className:"mb-7 mt-3 flex flex-col gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm",children:i("usersList.inviteDescription")})}),(0,a.jsxs)("form",{className:"flex w-full items-center gap-3",onSubmit:L(e=>{let{email:s}=e;_({email:s})}),children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(S.Z,{error:null===(s=U.email)||void 0===s?void 0:s.message,...k("email"),type:"email",className:"h-10 rounded-md border border-gray_24 placeholder:text-cancel"})}),(0,a.jsx)(x.z,{type:"submit",className:"h-10",loading:P,children:i("usersList.send")})]})]}),(0,a.jsx)(h.Z,{className:"-mx-4 border-dashed border-gray/300"}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-sm font-semibold",children:i("usersList.accesses")}),(0,a.jsx)("div",{className:"h-[calc(100vh-500px)] rounded-md bg-gray/200 py-2 pl-4 pr-2",children:(0,a.jsx)(g.x,{className:"h-full",children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:null==u?void 0:u.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 whitespace-nowrap text-sm",children:[e.firstName&&"".concat(e.firstName," ").concat(null!==(s=e.lastName)&&void 0!==s?s:""),(0,a.jsxs)("span",{className:"text-xs text-gray/500",children:[" ",e.email]}),e.pendingInvite&&(0,a.jsx)(Badge,{variant:"inactive",className:"px-2 py-0 text-gray/500",children:i("usersList.status.pending")})]}),e.id!==t&&(0,a.jsx)(DeleteUserModal,{userId:e.id})]},e.id)})})})})]})]})]})},k=t(3848),L=t(8109),U=t(2863),I=t(6577),Z=t.n(I),E=t(9911),T=t(7911),K=t(4830);let M=["jpeg","jpg","png","gif"],ImageUploader=e=>{let{setFile:s,file:t,isEditing:i=!0}=e,n=(0,l.useTranslations)(),[o,c]=(0,r.useState)(),[d,m]=(0,r.useState)(),getSizeInMb=e=>parseFloat((e/1048576).toFixed(2)),getFileExtension=e=>{var s;return(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase())||""};return(0,a.jsxs)("div",{className:"flex h-full flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative flex h-[110px] w-[110px] items-center justify-center rounded-full border border-dashed border-gray/400 transition-all ".concat(o?"scale-[1.08]":"scale-100"),children:[i&&(0,a.jsx)("input",{type:"file",accept:".jpeg, .jpg, .png, .gif",className:"absolute h-full w-full cursor-pointer rounded-full opacity-0",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];if(!M.includes(getFileExtension(t.name))||getSizeInMb(t.size)>3.1){let e="";M.includes(getFileExtension(t.name))||(e=n("errors.invalidFormat",{formats:"jpeg, jpg, png, gif"})),getSizeInMb(t.size)>3.1&&(e&&(e+="\n"),e+=n("errors.invalidSize",{size:"3.1 MB"})),m(e);return}s(t),m(void 0)}},onDragEnter:()=>c(!0),onDragLeave:()=>c(!1),onDrop:()=>c(!1)},t?"definedFile":"undefinedFile"),t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z(),{width:0,height:0,className:"h-[calc(100%_-_15px)] w-[calc(100%_-_15px)] rounded-full object-cover",alt:n("uploadImage.imageAlt"),src:URL.createObjectURL(t)}),i&&(0,a.jsx)(E.s5_,{size:25,className:"border-black_5 absolute right-3 top-3 cursor-pointer rounded-full border bg-white p-[3px]",onClick:()=>s(void 0)})]}):(0,a.jsxs)("div",{className:"bg-black_5 flex h-[136px] w-[136px] flex-col items-center justify-center rounded-full text-gray/400",children:[(0,a.jsx)(E.wa4,{size:25,className:""}),(0,a.jsx)("p",{className:"text-mid_grey mt-1 text-xs",children:n("uploadImage.uploadPhoto")})]})]}),(0,a.jsxs)("p",{className:"text-light_grey mb-2 mt-5 text-center text-xs text-gray/400",children:[n("uploadImage.allowedFormats")," ",(0,a.jsx)("br",{})," ",n("uploadImage.maxSize")]}),(0,a.jsx)(K.pn,{children:(0,a.jsxs)(K.u,{children:[(0,a.jsx)(K.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"max-h-10 overflow-y-auto lg:max-w-[180px]",children:(0,a.jsx)(T.Z,{className:"text-center",errorMessage:d})})}),(0,a.jsx)(K._v,{side:"top",children:d})]})})]})};ImageUploader.displayName="ImageUploader";var F=t(4631),organisms_ChangePasswordModal=()=>{var e,s,t;let i=(0,l.useTranslations)(),[n,c]=(0,r.useState)(!1),{mutate:d,isLoading:u}=o.h.auth.resetPassword.useMutation({onSuccess:()=>(h(),c(!1),(0,m.Am)({variant:"default",title:i("settings.changePassword.success")})),onError:e=>{e.message===F.CV?v("currentPassword",{type:"manual",message:i("errors.incorrectPassword")}):(0,m.Am)({variant:"destructive",title:i("errors.somethingWentWrong")})}}),{handleSubmit:f,register:p,formState:{errors:g},reset:h,setError:v}=(0,N.cI)({mode:"onSubmit",resolver:(0,y.F)(b.z.object({currentPassword:b.z.string().min(1,i("errors.required")).min(8,i("errors.min",{min:"8",name:i("settings.changePassword.password")})),newPassword:b.z.string().min(1,i("errors.required")).min(8,i("errors.min",{min:"8",name:i("settings.changePassword.password")})),confirmPassword:b.z.string().min(1,i("errors.required")).min(8,i("errors.min",{min:"8",name:i("settings.changePassword.confirmPassword")}))}).refine(e=>e.newPassword===e.confirmPassword,{message:i("errors.passwordMatchError"),path:["confirmPassword"]}))}),handlePasswordSubmit=e=>{let{currentPassword:s,newPassword:t}=e;d({currentPassword:s,newPassword:t})};return(0,a.jsx)(z.u,{confirmButtonText:i("settings.changePassword.submit"),cancelButtonText:i("text.cancel"),withCloseButton:!0,size:"small",triggerButton:(0,a.jsx)(x.z,{variant:"outline",className:"h-10 w-[200px]",children:i("settings.personalInformation.changePassword")}),onConfirm:()=>f(handlePasswordSubmit)(),onCancel:()=>h(),title:i("settings.changePassword.submit"),hasError:Object.keys(g).length>0,loading:u,open:n,setOpen:c,children:(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-6 px-6",children:[(0,a.jsx)("p",{className:"font-semibold",children:i("settings.changePassword.subtitle")}),(0,a.jsxs)("form",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)(S.Z,{type:"password",withLabelText:i("settings.changePassword.currentPassword"),variant:"gray",autoComplete:"current-password",...p("currentPassword"),error:null===(e=g.currentPassword)||void 0===e?void 0:e.message}),(0,a.jsx)(S.Z,{type:"password",withLabelText:i("auth.confirmAccount.password"),variant:"gray",autoComplete:"new-password",...p("newPassword"),error:null===(s=g.newPassword)||void 0===s?void 0:s.message}),(0,a.jsx)(S.Z,{type:"password",withLabelText:i("auth.confirmAccount.confirmPassword"),variant:"gray",autoComplete:"new-password",...p("confirmPassword"),error:null===(t=g.confirmPassword)||void 0===t?void 0:t.message})]})]})})},organisms_ProfileSettings=()=>{var e,s;let t=(0,l.useTranslations)(),{data:i,update:n}=(0,k.useSession)(),[c,d]=(0,r.useState)(!1),[u,g]=(0,r.useState)(),h=b.z.object({profilePictureUrl:b.z.object({name:b.z.string(),data:b.z.string()}).nullable().optional(),firstName:b.z.string().min(1,t("errors.required")).nullable(),lastName:b.z.string().min(1,t("errors.required")).nullable(),email:b.z.string().email()}),{handleSubmit:v,register:j,formState:{errors:w},reset:_}=(0,N.cI)({mode:"onSubmit",resolver:(0,y.F)(h)});(0,r.useEffect)(()=>{if(null==i?void 0:i.user.profilePictureUrl){let execute=async e=>{let s=await (0,L.u)(e);g(s)};execute(null==i?void 0:i.user.profilePictureUrl)}},[null==i?void 0:i.user.profilePictureUrl]),(0,r.useEffect)(()=>{(null==i?void 0:i.user)&&_({firstName:i.user.firstName,lastName:i.user.lastName,email:i.user.email})},[i,_]);let{mutate:P,isLoading:z}=o.h.settings.editProfile.useMutation({onSuccess:async e=>((0,m.Am)({variant:"default",title:t("settings.personalInformation.confirmedUpdate")}),await n({...null==i?void 0:i.user,name:e.firstName,lastName:e.lastName,profilePictureUrl:e.profilePictureUrl})),onError:()=>(0,m.Am)({variant:"destructive",title:t("settings.personalInformation.errorUpdatingProfile")})}),handleProfileSubmit=async e=>{P({...e,profilePictureUrl:u?{name:u.name,data:await (0,L.sT)(u)}:null}),_(),d(!1)};return(0,a.jsx)("div",{className:"mt-4 flex flex-col gap-3",children:(0,a.jsxs)(f.Zb,{className:"w-full p-4 py-3",children:[(0,a.jsx)(p.Z,{children:t("settings.personalInformation.title")}),(0,a.jsxs)("div",{className:"mt-4 flex h-fit flex-col items-center justify-between lg:flex-row lg:gap-x-8 lg:px-16",children:[(0,a.jsx)(ImageUploader,{file:u,setFile:g,isEditing:c}),(0,a.jsxs)("div",{className:"w-full lg:w-[75%]",children:[(0,a.jsx)("form",{children:(0,a.jsxs)("div",{className:"mb-2 grid w-full grid-cols-2 gap-x-4",children:[(0,a.jsx)(S.Z,{type:"text",withLabelText:t("settings.personalInformation.firstName"),variant:"gray",...j("firstName"),disabled:!c,error:null===(e=w.firstName)||void 0===e?void 0:e.message}),(0,a.jsx)(S.Z,{type:"text",withLabelText:t("settings.personalInformation.lastName"),variant:"gray",...j("lastName"),disabled:!c,error:null===(s=w.lastName)||void 0===s?void 0:s.message}),(0,a.jsx)(U.Z,{type:"text",withLabelText:t("settings.personalInformation.email"),variant:"gray",disabled:!0,...j("email")})]})}),c?(0,a.jsxs)("div",{className:"flex w-full justify-between",children:[(0,a.jsx)(organisms_ChangePasswordModal,{}),(0,a.jsxs)("div",{className:"flex w-full justify-end gap-4",children:[(0,a.jsx)(x.z,{variant:"outline",className:"h-10",onClick:()=>d(!1),children:t("text.cancel")}),(0,a.jsx)(x.z,{type:"submit",className:"h-10 w-[150px]",loading:z,onClick:()=>v(handleProfileSubmit)(),children:t("settings.personalInformation.saveChanges")})]})]}):(0,a.jsx)("div",{className:"flex w-full justify-end",children:(0,a.jsx)(x.z,{className:"h-10 w-[150px]",onClick:()=>d(!0),loading:z,children:t("settings.personalInformation.editInformation")})})]})]})]})})},A=t(3197);let SettingsPage=e=>{let{userId:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(organisms_ProfileSettings,{}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row",children:[(0,a.jsx)("div",{className:"h-[300px] w-full lg:h-[calc(100vh_-_435px)] lg:w-[35%] xl:w-[26%]",children:(0,a.jsx)(molecules_UsersList,{userId:s})}),(0,a.jsx)("div",{className:"h-[500px] w-full lg:h-[calc(100vh_-_435px)] lg:w-[75%] xl:w-[74%]",children:(0,a.jsx)(molecules_HomePageKpisSelector,{})})]})]})};SettingsPage.getLayout=e=>(0,a.jsx)(A.Z,{titleKey:"personalSettings",children:e});var R=!0,B=SettingsPage},4631:function(e,s,t){"use strict";t.d(s,{CV:function(){return a},R6:function(){return r},SX:function(){return i}});let a="Error: Incorrect password",r="Error: At least two organization campaigns are required for comparison vs last campaign reference.",i="Error: There is no benchmark for selected kpi for comparison vs benchmark reference."},8109:function(e,s,t){"use strict";t.d(s,{_z:function(){return imageUrlFromKey},sT:function(){return fileToBase64},u:function(){return imageUrlToFile}});var a=t(5803);let fileToBase64=e=>new Promise((s,t)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>s(a.result),a.onerror=e=>t(e)}),imageUrlToFile=async e=>{let s=await fetch(e,{cache:"no-cache"}),t=await s.blob(),a=new File([t],e);return a},imageUrlFromKey=e=>e?"".concat(a.O.NEXT_PUBLIC_IMAGE_BUCKET_BASE_URL,"/").concat(e):null}},function(e){e.O(0,[235,917,525,461,898,713,872,131,612,512,535,218,641,774,888,179],function(){return e(e.s=4994)}),_N_E=e.O()}]);