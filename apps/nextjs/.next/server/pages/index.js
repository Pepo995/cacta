"use strict";(()=>{var e={};e.id=5405,e.ids=[5405,2888,660],e.modules={3523:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>m,getStaticProps:()=>u,reportWebVitals:()=>f,routeModule:()=>w,unstable_getServerProps:()=>_,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>P,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>v});var s=a(8877),l=a(4591),i=a(6021),o=a(1938),n=a.n(o),c=a(4801),d=a(465),h=e([c,d]);[c,d]=h.then?(await h)():h;let p=(0,i.l)(d,"default"),u=(0,i.l)(d,"getStaticProps"),m=(0,i.l)(d,"getStaticPaths"),x=(0,i.l)(d,"getServerSideProps"),g=(0,i.l)(d,"config"),f=(0,i.l)(d,"reportWebVitals"),v=(0,i.l)(d,"unstable_getStaticProps"),b=(0,i.l)(d,"unstable_getStaticPaths"),P=(0,i.l)(d,"unstable_getStaticParams"),_=(0,i.l)(d,"unstable_getServerProps"),y=(0,i.l)(d,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:c.default,Document:n()},userland:d});r()}catch(e){r(e)}})},2094:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var s=a(997),l=a(6689),i=a(503),o=a(3022),n=a(5819),c=a(8293),d=a(428),h=a(2428),p=a(8590),u=e([c,d,h,p]);[c,d,h,p]=u.then?(await u)():u;let Tooltip=({targetValue:e,value:t,label:a})=>{let r=Math.round((t??0)*100/e),l=a?Math.min(a?.length*10,60):Math.max(9*r.toLocaleString().length,40),i=`calc(${t/e<=2?50*t/e:100}% - ${l/2}px)`;return s.jsx("div",{className:"absolute bottom-11",style:{left:i},children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx("p",{className:(0,c.cn)("line-clamp-1 bg-white p-0.5 text-center text-xs",!a&&"rounded-sm bg-gray/800 text-white"),style:{width:l},children:a??`${r}%`}),s.jsx(n.yQg,{size:16,className:"absolute left-[calc(50%_-_8px)] top-[14px]"})]})})},BenchmarkTooltip=()=>{let e=(0,i.useTranslations)(),t=9*e("polarChart.benchmark").length,a=`calc(50% - ${t/2}px)`;return s.jsx("div",{className:"absolute top-11",style:{left:a},children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx(n.RPR,{size:16,className:"absolute bottom-[18px] left-[calc(50%_-_8px)]"}),s.jsx("p",{className:"w-fit rounded-sm bg-gray/800 p-1 text-center text-xs text-white",style:{width:t},children:e("polarChart.benchmark")})]})})},KPIGradientBar=({targetValue:e,currentValue:t,products:a})=>{let r=a?.filter(a=>Math.abs(a.value/e*100-t/e*100)>20),l=r?.filter((t,a,r)=>{if(0===a)return!0;let s=r[a-1]?.value??0;return Math.abs(t.value/e*100-s/e*100)>20});return(0,s.jsxs)("div",{className:"relative w-full",children:[l?.map((t,a)=>s.jsx(Tooltip,{targetValue:e,value:t.value,label:t.name},a)),s.jsx(Tooltip,{targetValue:e,value:t}),s.jsx(BenchmarkTooltip,{}),s.jsx("div",{className:"relative mb-4 mt-16 h-9 w-full rounded-full bg-gradient-green-to-red",children:["16%","33%","50%","66%","82%"].map((e,t)=>s.jsx("div",{className:"absolute h-full w-0.5 bg-white",style:{right:e}},t))})]})},__WEBPACK_DEFAULT_EXPORT__=({selectedCategory:e,setSelectedCategory:t,kpis:a})=>{let r=(0,i.useTranslations)(),[n,c]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{e&&c(!0)},[e]),s.jsx(d.Vq,{open:n,onOpenChange:()=>{c(!1),t(void 0)},children:(0,s.jsxs)(d.cZ,{className:"flex flex-col sm:max-w-[680px]",children:[s.jsx(d.fK,{className:"mb-8 mt-2 px-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx(d.$N,{className:"font-medium text-secondary",children:e&&r(`polarChart.categories.${e}`)}),s.jsx(o.nfZ,{onClick:()=>{c(!1),t(void 0)},size:16,className:"cursor-pointer p-0"})]})}),s.jsx(p.Z,{}),s.jsx(h.x,{children:s.jsx("div",{className:"h-full max-h-[60vh] px-10 py-6",children:s.jsx("div",{className:"flex flex-col gap-y-10",children:a.map((e,t)=>(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"mb-4 font-semibold",children:e.name}),s.jsx("p",{className:"mb-8 text-justify",children:e.description}),s.jsx(KPIGradientBar,{targetValue:e.benchmark,currentValue:e.totalValue,products:e.products})]},t))})})})]})})};r()}catch(e){r(e)}})},484:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__,j:()=>m});var s=a(997),l=a(6689),i=a(3767),o=a(723),n=a.n(o),c=a(503),d=a(738),h=a(671),p=a(8293),u=e([i,d,h,p]);[i,d,h,p]=u.then?(await u)():u,i.Chart.register(i.RadialLinearScale,i.ArcElement,n());let m=20,createRadialGradient=(e,t,a,r)=>{let s=e.chartArea.width/2,l=e.chartArea.height/2,i=e.width/2*((100+m)/200),o=e.ctx,n=o.createRadialGradient(s,l,0,s,l,i);return n.addColorStop(m/(100+m),t),n.addColorStop((50+m)/(100+m),a),n.addColorStop(1,r),n},x={id:"angleLines",afterDatasetDraw:e=>{let{ctx:t}=e,a=e.data.datasets.map(e=>e.data.length/4),getAngles=(e,t)=>{let a=90/e,r=[];for(let s=1;s<=e;s++)r.push((a*s+t)*(Math.PI/180));return r},r=[Math.PI/2,Math.PI,3*Math.PI/2,2*Math.PI];a.map((e,t)=>{let a=getAngles(e,(t+1)*90);r.push(...a)});let s=e.chartArea.width/2,l=e.chartArea.height/2,i=e.width/2*(100+m)/200;r.map(e=>{let a=s-i*Math.cos(e),r=l-i*Math.sin(e);t.save(),t.beginPath(),t.moveTo(s,l),t.lineTo(a,r),t.lineWidth=1.5,t.strokeStyle="#fff",t.stroke(),t.closePath()}),t.save(),t.beginPath(),t.lineWidth=1.5,t.strokeStyle="#fff",t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowBlur=30,t.shadowColor="#c4cdd5",t.arc(s,l,i,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.restore()}},thresholdLines=e=>({id:"thresholdLines",afterDatasetDraw:t=>{let{ctx:a}=t,r=t.chartArea.width/2,s=t.chartArea.height/2,l=t.width/2*(50+m)/200;a.save(),a.beginPath(),a.lineWidth=1.5,a.strokeStyle="#8e33ff",a.setLineDash([5,5]),a.arc(r,s,l,0,2*Math.PI,!1),a.stroke(),a.font="10pt Poppins",a.textAlign="center",a.fillStyle="#8e33ff",Array.from(e).map((e,t)=>{let i=(t-15)*4.5;a.save(),a.translate(r+(l+5)*Math.cos((i-90)*(Math.PI/180)),s+(l+5)*Math.sin((i-90)*(Math.PI/180))),a.rotate(i*(Math.PI/180)),a.fillText(e,0,0),a.restore()}),a.closePath(),a.restore()}}),centerImage=(e,t)=>({id:"centerImage",afterDatasetDraw:a=>{let{ctx:r}=a,s=a.chartArea.width/2,l=a.chartArea.height/2,i=a.width/2*m/200;r.save(),r.beginPath(),r.arc(s,l,i,0,2*Math.PI,!1),r.fillStyle="#ffffff",r.fill(),r.clip();let imageProperties=e=>{let t,a;let r=Math.min(e.width,e.height),o=Math.max(e.width,e.height),n=2*i-(r!==o?15*o/r:0);e.width>e.height?(t=n,a=e.height*n/e.width):(a=n,t=e.width*n/e.height);let c=s-t/2,d=l-a/2;return{dx:c,dy:d,imageWidth:t,imageHeight:a}};try{let{dx:t,dy:a,imageWidth:s,imageHeight:l}=imageProperties(e);r.drawImage(e,t,a,s,l)}catch(i){let{dx:e,dy:a,imageWidth:s,imageHeight:l}=imageProperties(t);r.drawImage(t,e,a,s,l)}r.closePath(),r.restore()}}),__WEBPACK_DEFAULT_EXPORT__=({chartData:e,setSelectedCategory:t,logoUrl:a})=>{let r=(0,c.useTranslations)(),[i,o]=(0,l.useState)(),n=new Image;n.src=a.length>0?a:"/icons/logoBlackLetters.svg";let u=new Image;return u.src="/icons/logoBlackLetters.svg",(0,s.jsxs)("div",{style:{cursor:i?"pointer":"default"},className:"relative flex h-full max-h-[900px] w-full max-w-[900px] items-center justify-center overflow-hidden xl:w-[70%]",children:[h.$.map(e=>s.jsx("p",{className:(0,p.cn)("absolute whitespace-pre-line font-bold",i===e?"text-secondary":i&&"text-gray/400","ClimateChange"===e&&"left-0 top-40 lg:top-10","EcosystemQuality"===e&&"right-0 top-40 text-right lg:top-10","HumanHealth"===e&&"bottom-40 right-0 text-right lg:bottom-5","ResourcesExhaustion"===e&&"bottom-40 left-0 lg:bottom-5"),children:r(`polarChart.categories.${e}`)},e)),s.jsx("div",{className:"flex aspect-square w-full items-center justify-center lg:h-[115%] lg:w-[unset]",children:s.jsx(d.PolarArea,{data:e,options:{animation:{animateRotate:!1,animateScale:!1},onClick(e,a){let r=a[0]?.datasetIndex;void 0!==r&&t(h.$[r])},onHover:(e,t,a)=>{let r=a.config.data.datasets,s=t[0]?.datasetIndex,l=void 0===i&&void 0===s||void 0!==s&&i===h.$[s];l||(t.length>0&&void 0!==s?(o(h.$[s]),r.forEach((e,t)=>{s===t?e.backgroundColor=createRadialGradient(a,"#14AE5C","#ffcd29","#FF5630"):e.backgroundColor=createRadialGradient(a,"#14ae5c81","#ffcd2981","#FF563081")})):(o(void 0),r.forEach(e=>e.backgroundColor=createRadialGradient(a,"#14AE5C","#ffcd29","#FF5630"))),a.update("none"))},elements:{arc:{backgroundColor:e=>createRadialGradient(e.chart,"#14AE5C","#ffcd29","#FF5630"),hoverBorderColor:"transparent",borderColor:"transparent"}},plugins:{tooltip:{enabled:!1},datalabels:{textAlign:"center",color:e=>{if(i){let t=h.$.indexOf(i),a=e.datasetIndex===t?"#8e33ff":"#c4cdd5";return a}return"#454f5b"},anchor:"end",align:"end",clip:!0,font:{family:"Poppins",size:12},offset:e=>{let t=e.dataset.data[e.dataIndex];return"number"!=typeof t&&(t=0),(100+m-t)*(e.chart.width/2)/200+10},formatter:(e,t)=>t.dataset?.label?.[t.dataIndex]?.split(/[\s-]+/)}},scales:{r:{ticks:{display:!1},grid:{display:!1},max:200}}},plugins:[x,thresholdLines(r("polarChart.benchmark")),centerImage(n,u)]},a?"logoLoaded":"logoNotLoaded")})]})};r()}catch(e){r(e)}})},671:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{$:()=>d,Z:()=>__WEBPACK_DEFAULT_EXPORT__});var s=a(6689),l=a(503),i=a(4271),o=a(857),n=a(484),c=e([i,n]);[i,n]=c.then?(await c)():c;let getRelativePosition=(e,t,a)=>(e/t>1?(e-t)*50/(t*(a-1))+50:50*e/t)+n.j,d=["EcosystemQuality","HumanHealth","ResourcesExhaustion","ClimateChange"],__WEBPACK_DEFAULT_EXPORT__=()=>{let e=(0,l.useLocale)(),{data:t,isLoading:a}=i.h.homePage.homePageData.useQuery(),[r,n]=(0,s.useState)([]),c=t?.logoUrl??"";(0,s.useEffect)(()=>{if(t){let a=t.homePageData.map(t=>({...t,name:(0,o.i)(t.name,e),description:(0,o.i)(t.description,e),products:t.products.map(t=>({...t,name:(0,o.i)(t.name,e)}))}));n(a)}},[t,e]);let h=Math.max(Math.max(...r.map(e=>e.totalValue/e.benchmark<=1?1:e.totalValue/e.benchmark)),2),p={};d.map((e,t)=>{let a=r.filter(t=>t.category===e),s=Array(4*a.length).fill(void 0);a?.map((e,r)=>{s[r+a.length*t]=e}),p[e]=s});let u={datasets:d.map(e=>({data:p[e].map(e=>e?getRelativePosition(e.totalValue,e.benchmark,h):0),label:p[e].map(e=>e?.name??"")}))},m=a||!t;return{polarChartData:u,kpis:r,logoUrl:c,isLoading:m}};r()}catch(e){r(e)}})},465:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>g,getServerSideProps:()=>getServerSideProps});var s=a(997),l=a(6689),i=a(503),o=a(3988),n=a(8521),c=a(2948),d=a(2094),h=a(484),p=a(6697),u=a(671),m=a(5462),x=e([d,h,p,u,m]);[d,h,p,u,m]=x.then?(await x)():x;let Home=()=>{let{polarChartData:e,kpis:t,logoUrl:a,isLoading:r}=(0,u.Z)(),n=(0,i.useLocale)(),c=`polar-chart-${n}`,[p,m]=(0,l.useState)();return r?s.jsx("div",{className:"flex h-[calc(100vh_-_180px)] w-full items-center justify-center",children:s.jsx(o.Cd,{size:120,className:"animate-spin text-gray/400"})}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.Z,{kpis:t?.filter(e=>e.category===p),selectedCategory:p,setSelectedCategory:m}),s.jsx("div",{className:"flex h-[calc(100vh_-_150px)] w-full justify-center",children:s.jsx(h.Z,{chartData:e,setSelectedCategory:m,logoUrl:a},c)})]})};Home.getLayout=e=>s.jsx(p.Z,{userName:e.props.userName,titleKey:"home",children:e});let getServerSideProps=async({locale:e,req:t,res:a})=>{let r=await (0,m.W)({req:t,res:a});return r?{props:{userName:r.user.firstName,messages:await (0,c.E)(e)}}:{redirect:{destination:n.H4}}},g=Home;r()}catch(e){r(e)}})},3524:e=>{e.exports=require("@prisma/client")},7620:e=>{e.exports=require("@radix-ui/react-avatar")},3363:e=>{e.exports=require("@radix-ui/react-dialog")},8532:e=>{e.exports=require("@radix-ui/react-dropdown-menu")},4034:e=>{e.exports=require("@radix-ui/react-select")},2479:e=>{e.exports=require("@radix-ui/react-toast")},8432:e=>{e.exports=require("bcryptjs")},723:e=>{e.exports=require("chartjs-plugin-datalabels")},8103:e=>{e.exports=require("clsx")},3227:e=>{e.exports=require("next-auth")},7449:e=>{e.exports=require("next-auth/providers/credentials")},1649:e=>{e.exports=require("next-auth/react")},503:e=>{e.exports=require("next-intl")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},72:e=>{e.exports=require("superjson")},1656:e=>{e.exports=import("@hookform/resolvers/zod")},7412:e=>{e.exports=import("@radix-ui/react-accordion")},49:e=>{e.exports=import("@radix-ui/react-label")},307:e=>{e.exports=import("@radix-ui/react-scroll-area")},6206:e=>{e.exports=import("@t3-oss/env-nextjs")},272:e=>{e.exports=import("@trpc/client")},7455:e=>{e.exports=import("@trpc/next")},3767:e=>{e.exports=import("chart.js")},6926:e=>{e.exports=import("class-variance-authority")},738:e=>{e.exports=import("react-chartjs-2")},5641:e=>{e.exports=import("react-hook-form")},8097:e=>{e.exports=import("tailwind-merge")},9926:e=>{e.exports=import("zod")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[1938,8724,7457,5632,5487,9244,6983,3988,3022,4801,2876,1172,3833],()=>__webpack_exec__(3523));module.exports=a})();