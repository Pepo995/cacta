"use strict";(()=>{var a={};a.id=829,a.ids=[829],a.modules={1841:a=>{a.exports=require("@aws-sdk/client-s3")},4298:a=>{a.exports=require("@aws-sdk/client-ses")},3303:a=>{a.exports=require("@paralleldrive/cuid2")},3524:a=>{a.exports=require("@prisma/client")},8432:a=>{a.exports=require("bcryptjs")},9344:a=>{a.exports=require("jsonwebtoken")},3227:a=>{a.exports=require("next-auth")},7449:a=>{a.exports=require("next-auth/providers/credentials")},145:a=>{a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5184:a=>{a.exports=require("nodemailer")},6689:a=>{a.exports=require("react")},997:a=>{a.exports=require("react/jsx-runtime")},72:a=>{a.exports=require("superjson")},7717:a=>{a.exports=import("@react-email/components")},846:a=>{a.exports=import("@react-email/font")},4116:a=>{a.exports=import("@react-email/head")},8816:a=>{a.exports=import("@react-email/render")},3594:a=>{a.exports=import("@t3-oss/env-core")},6206:a=>{a.exports=import("@t3-oss/env-nextjs")},2937:a=>{a.exports=import("@trpc/server")},6282:a=>{a.exports=import("@trpc/server/adapters/next")},9926:a=>{a.exports=import("zod")},6568:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.r(e),t.d(e,{config:()=>p,default:()=>c,routeModule:()=>m});var n=t(9150),r=t(1631),o=t(6835),s=t(5909),d=a([s]);s=(d.then?(await d)():d)[0];let c=(0,o.l)(s,"default"),p=(0,o.l)(s,"config"),m=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/trpc/[trpc]",pathname:"/api/trpc/[trpc]",bundlePath:"",filename:""},userland:s});i()}catch(a){i(a)}})},5909:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.r(e),t.d(e,{default:()=>c});var n=t(6282),r=t(5401),o=t(6435),s=t(8237),d=a([n,r,o,s]);[n,r,o,s]=d.then?(await d)():d;let c=(0,n.createNextApiHandler)({router:o.q,createContext:s.uw,onError:"development"===r.O.NODE_ENV?({path:a,error:e})=>{console.error(`‚ùå tRPC failed on ${a??"<no-path>"}: ${e.message}`)}:void 0});i()}catch(a){i(a)}})},1439:(a,e,t)=>{t.d(e,{GY:()=>findBenchmark,HK:()=>findPreviousProductCampaigns,iw:()=>calculatePerformanceComparison,ob:()=>r,qR:()=>findKpiPerformance});var i=t(9511),n=t(5978);let r={establishmentCampaign:{select:{organizationCampaign:{include:{organizationCampaignKpiBenchmarks:!0}}}},productKpis:!0},findBenchmark=(a,e,t)=>{let i=a.find(a=>a?.kpiId===e);if(i){let a=i.productKpiBenchmarks.find(a=>a.productId===t);return a?.benchmark??i.benchmark}return null},findKpiPerformance=(a,e,t)=>{let n=0,r=0;if(a)for(let t of a){if(!t.endDate)return null;let a=t.productKpis.filter(a=>a.kpiId===e).reduce((a,e)=>a+e.totalValue,0);r+=a,n+=t.harvestedAmount??0}return(0,i.JU)(t)?r:n?r/n:0},calculatePerformanceComparison=(a,e,t)=>a?"Custom"!==e?t?(0,n.N)((a-t)/t*100):0:(0,n.N)(a):null,findPreviousProductCampaigns=async(a,e,t,i)=>{let n=await t.prisma.organizationCampaign.findFirst({where:{organizationId:i,startDate:{lt:a}},orderBy:{startDate:"desc"}});return await t.prisma.productCampaign.findMany({where:{establishmentCampaign:{organizationCampaignId:n?.id},productId:e},include:r})}},6435:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{q:()=>h});var n=t(4625),r=t(6723),o=t(2202),s=t(9905),d=t(2578),c=t(9010),p=t(8609),m=t(3355),u=t(4051),l=t(8237),g=a([n,r,o,s,d,c,p,m,u,l]);[n,r,o,s,d,c,p,m,u,l]=g.then?(await g)():g;let h=(0,l.hA)({auth:r.m,homePage:s.g,monitor:p.v,analyze:n.m,report:m.j,initiative:d.Y,download:o.J,settings:u.N,invitations:c.G});i()}catch(a){i(a)}})},4625:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{m:()=>d});var n=t(9926),r=t(8237),o=a([n,r]);[n,r]=o.then?(await o)():o;let s=n.default.enum(["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"]),d=(0,r.hA)({productsAndKpisList:r.U5.input(n.default.object({category:s})).query(async({ctx:a,input:e})=>{let t=await a.prisma.product.findMany({where:{productCampaigns:{every:{endDate:{not:null},harvestedAmount:{not:null}},some:{productKpis:{some:{kpi:{category:e.category}}},establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}}}),i=await a.prisma.kpi.findMany({where:{category:e.category,productKpis:{some:{productCampaign:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}}},orderBy:{createdAt:"asc"}});return{productsList:t,kpisList:i}}),performancePanel:r.U5.input(n.default.object({productIdFilter:n.default.string().optional(),kpiIdFilter:n.default.string().optional(),category:s})).query(async({ctx:a,input:e})=>{let t=(await a.prisma.organizationCampaignKpiBenchmark.findFirst({where:{organizationCampaignId:a.session.organizationCampaign.id,kpiId:e.kpiIdFilter},include:{productKpiBenchmarks:!0}}))?.productKpiBenchmarks.find(a=>a.productId===e.productIdFilter)?.benchmark,i=await a.prisma.activityProductKpi.findMany({where:{productKpi:{kpi:{category:e.category},kpiId:e.kpiIdFilter,productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}},include:{productKpi:{include:{productCampaign:!0}}},orderBy:{activity:"asc"}}),n=i.map(a=>a.id),r=[];i.forEach(a=>{r.some(e=>e===a.activity)||r.push(a.activity)});let o=await a.prisma.activityInput.findMany({where:{activityId:{in:n}},include:{activity:!0,input:!0}}),s=(await a.prisma.productCampaign.findMany({where:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}})).reduce((a,e)=>a+(e.harvestedAmount??0),0),d=(await a.prisma.productKpi.findMany({where:{productCampaign:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id},productId:e.productIdFilter},kpiId:e.kpiIdFilter}})).reduce((a,e)=>e.totalValue+a,0);return{activitiesList:r,activityProductKpis:i,activityInputs:o,benchmark:t,selectedProductAmount:s,organizationCampaign:a.session.organizationCampaign,totalKpi:d}}),electricity:r.U5.input(n.default.object({productIdFilter:n.default.string().optional(),kpiIdFilter:n.default.string().optional()})).query(async({ctx:a,input:e})=>{let t=await a.prisma.productKpi.findMany({where:{productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpiId:e.kpiIdFilter}}),i=t.map(a=>a.id),n=await a.prisma.productKpiElectricitySource.findMany({where:{productKpiId:{in:i}}}),r=await a.prisma.electricitySource.findMany({}),o=r.map(a=>{let e=n.reduce((e,t)=>t.electricitySourceId===a.id?e+t.value:e,0);return{...a,value:e}}),s=o.reduce((a,e)=>e.renewable?a+e.value:a,0),d=o.reduce((a,e)=>e.renewable?a:a+e.value,0),c=s+d;return{electricitySources:o,classification:[{key:"renewable",value:s/c*100},{key:"nonRenewable",value:d/c*100}]}}),waterComposition:r.U5.input(n.default.object({productIdFilter:n.default.string().optional(),kpiIdFilter:n.default.string().optional()})).query(async({ctx:a,input:e})=>{let t=await a.prisma.productKpi.findMany({where:{productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpiId:e.kpiIdFilter},include:{waterComposition:!0}}),i=t.map(a=>a.waterComposition),n={greenFootprint:0,blueFootprint:0,requiredWater:0,rainfall:0,irrigation:0,lostRainfall:0,lostIrrigation:0,balance:0},r=Object.keys(n);r.forEach(a=>{n[a]=i.reduce((e,t)=>e+(t?.[a]??0),0)});let o=r.filter(a=>"blueFootprint"!==a&&"greenFootprint"!==a),s=o.map(a=>({key:a,value:n[a]})),d=n.blueFootprint+n.greenFootprint,c=[{key:"blueFootprint",value:n.blueFootprint/d*100},{key:"greenFootprint",value:n.greenFootprint/d*100}],p=await a.prisma.kpi.findFirst({where:{key:"WaterProductivity"}}),m=(await a.prisma.organizationCampaignKpiBenchmark.findFirst({where:{organizationCampaignId:a.session.organizationCampaign.id,kpi:{key:"WaterProductivity"}}}))?.benchmark,u=await a.prisma.productKpi.findMany({where:{productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpi:{key:"WaterProductivity"}},include:{waterComposition:!0}}),l=u.reduce((a,e)=>a+e.totalValue,0),g={name:p?.name,value:l,unit:p?.unit,benchmark:m};return{barChartData:s,footprints:c,waterProductivity:g}}),performanceStages:r.U5.input(n.default.object({productIdFilter:n.default.string().optional(),category:s})).query(async({ctx:a,input:e})=>{let t=await a.prisma.activityProductKpi.findMany({where:{productKpi:{kpi:{category:e.category},productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}},include:{productKpi:{include:{productCampaign:!0}},activityInputs:!0},orderBy:{activity:"asc"}}),i=await a.prisma.kpi.findMany({where:{category:e.category}}),n=i.map(a=>({kpiId:a.id,activityProductKpis:t.filter(e=>e.productKpi.kpiId===a.id)})),r=[];return t.forEach(a=>{r.some(e=>e===a.activity)||r.push(a.activity)}),{activitiesList:r,activityProductKpisByKpi:n}})});i()}catch(a){i(a)}})},6723:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{P:()=>p,m:()=>m});var n=t(2937),r=t(8432),o=t(9926),s=t(5634),d=t(8237),c=a([n,o,d]);[n,o,d]=c.then?(await c)():c;let p=12,m=(0,d.hA)({confirmAccount:d.U5.input(o.default.object({newPassword:o.default.string()})).mutation(async({ctx:a,input:{newPassword:e}})=>{let t=a.session.user.id,i=await (0,r.hash)(e,p);await a.prisma.user.update({where:{id:t},data:{hashedPassword:i,pendingVerification:!1}})}),resetPassword:d.U5.input(o.default.object({currentPassword:o.default.string(),newPassword:o.default.string()})).mutation(async({ctx:a,input:{currentPassword:e,newPassword:t}})=>{let i=a.session.user.id,o=await a.prisma.user.findUnique({where:{id:i}});if(!o)throw new n.TRPCError({code:"NOT_FOUND"});let d=await (0,r.compare)(e,o.hashedPassword);if(!d)throw new n.TRPCError({code:"BAD_REQUEST",message:s.CV});let c=await (0,r.hash)(t,p);await a.prisma.user.update({where:{id:i},data:{hashedPassword:c}})})});i()}catch(a){i(a)}})},2202:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{J:()=>d});var n=t(9926),r=t(8237),o=t(3355),s=a([n,r,o]);[n,r,o]=s.then?(await s)():s;let d=(0,r.hA)({downloadScorecardPdf:r.U5.input(n.z.object({productId:n.z.string(),organizationCampaignId:n.z.string()})).mutation(async({ctx:a,input:e})=>{let t=await a.prisma.organization.findUnique({where:{id:a.session.organizationId}}),i=o.j.createCaller(a),n=await i.getActivityInputsByProduct({productId:e.productId,organizationCampaignId:e.organizationCampaignId});return{organization:t,activityInputs:n}}),getCampaignsList:r.U5.query(async({ctx:a})=>await a.prisma.organizationCampaign.findMany({where:{organizationId:a.session.organizationId},orderBy:{startDate:"desc"}})),downloadOrganizationData:r.U5.input(n.z.object({format:n.z.enum(["csv","pdf"]),organizationCampaignId:n.z.string().optional()})).mutation(async({ctx:a,input:e})=>{a.session.organizationId,await a.prisma.organizationCampaign.findUnique({where:{id:e.organizationCampaignId},select:{engineId:!0}}),e.format,e.format,await new Promise(a=>{setTimeout(()=>{a()},2e3)})})});i()}catch(a){i(a)}})},9905:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{g:()=>d});var n=t(2937),r=t(9511),o=t(8237),s=a([n,o]);[n,o]=s.then?(await s)():s;let getBenchmark=(a,e)=>e.find(e=>e.kpiId===a)?.benchmark??0,getTotalKpi=(a,e,t)=>{let i=e.reduce((e,t)=>t.kpiId===a&&t.productCampaign.harvestedAmount?e+t.totalValue:e,0),n=e.reduce((e,t)=>t.kpiId===a&&t.productCampaign.harvestedAmount?e+t.productCampaign.harvestedAmount:e,0);return(0,r.JU)(t)?i:i/n},getProductsAndValues=(a,e,t)=>{let i=e.filter(e=>e.kpiId===a),n=[],r=new Set;i.forEach(a=>{let e=a.productCampaign.product,t=e.id;r.has(t)||(r.add(t),n.push(e))});let o=n.map(e=>{let n=i.filter(a=>a.productCampaign.productId===e.id);return{name:e.name,value:getTotalKpi(a,n,t)}});return o},d=(0,o.hA)({homePageData:o.U5.query(async({ctx:a})=>{let e=await a.prisma.user.findUnique({where:{id:a.session.user.id},select:{homePageKpis:{orderBy:{createdAt:"asc"}}}});if(!e)throw new n.TRPCError({code:"NOT_FOUND"});let t=e.homePageKpis.map(a=>a.id),i=a.session.organizationCampaign.organization.imageUrl,r=await a.prisma.organizationCampaignKpiBenchmark.findMany({where:{organizationCampaignId:a.session.organizationCampaign.id,kpiId:{in:t}}}),o=r.map(a=>a.kpiId),s=e.homePageKpis.filter(a=>o.includes(a.id)),d=await a.prisma.productKpi.findMany({where:{productCampaign:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpiId:{in:o}},include:{productCampaign:{include:{product:!0}}}}),c=s.map(a=>({id:a.id,benchmark:getBenchmark(a.id,r),totalValue:getTotalKpi(a.id,d,a.key),name:a.name,category:a.category,description:a.description,products:getProductsAndValues(a.id,d,a.key)}));return{homePageData:c,logoUrl:i}})});i()}catch(a){i(a)}})},2578:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{Y:()=>m});var n=t(2937),r=t(9926),o=t(5634),s=t(5978),d=t(1439),c=t(8237),p=a([n,r,c]);[n,r,c]=p.then?(await p)():p;let m=(0,c.hA)({createInitiative:c.U5.input(r.z.object({name:r.z.string(),productId:r.z.string(),description:r.z.string().nullable(),kpiId:r.z.string(),objective:r.z.number(),startDate:r.z.date(),endDate:r.z.date(),reference:r.z.enum(["LastCampaign","Benchmark","Custom"]),responsibleId:r.z.string()})).mutation(async({ctx:a,input:e})=>{let t=await a.prisma.organizationCampaign.findMany({where:{organization:{id:{equals:a.session.organizationId}},establishmentCampaigns:{some:{productCampaigns:{some:{productId:e.productId}}}}},orderBy:{startDate:"desc"},take:2});if(!t[0])throw new n.TRPCError({code:"NOT_FOUND",message:"No valid organization campaign was found for the given product in this organization."});if("LastCampaign"===e.reference&&t.length<2)throw new n.TRPCError({code:"NOT_FOUND",message:o.R6});let i=t[0].id;if("Benchmark"===e.reference){let t=await a.prisma.organizationCampaignKpiBenchmark.findFirst({where:{organizationCampaignId:i,kpiId:e.kpiId}});if(!t)throw new n.TRPCError({code:"NOT_FOUND",message:o.SX})}let r=await a.prisma.initiative.create({data:{...e,organizationCampaignId:i},select:{id:!0}});return r}),getInitiatives:c.U5.input(r.z.object({type:r.z.enum(["actual","past"]),pageSize:r.z.number().optional(),pageIndex:r.z.number().optional(),sorting:r.z.object({sortBy:r.z.string(),sortOrder:r.z.enum(["asc","desc"])}).optional(),searchQuery:r.z.string().nullish(),locale:r.z.string(),dateRange:r.z.object({from:r.z.date().optional(),to:r.z.date().optional()}).optional()})).query(async({input:a,ctx:e})=>{let t;let{pageIndex:i,pageSize:n,type:r}=a,o={};if(a.searchQuery){let t=await e.prisma.$queryRaw`
          SELECT "Initiative"."id" FROM "Initiative"
          INNER JOIN "Kpi" ON "Initiative"."kpiId" = "Kpi"."id"
          WHERE unaccent("Kpi"."name"->>${a.locale}) ILIKE unaccent(${`%${a.searchQuery}%`})
        `,i=await e.prisma.$queryRaw`
          SELECT "Initiative"."id" FROM "Initiative"
          INNER JOIN "Product" ON "Initiative"."productId" = "Product"."id"
          WHERE unaccent("Product"."name"->>${a.locale}) ILIKE unaccent(${`%${a.searchQuery}%`})
        `;o={OR:[{name:{contains:a.searchQuery??void 0,mode:"insensitive"}},{user:{firstName:{contains:a.searchQuery??void 0,mode:"insensitive"}}},{OR:[{id:{in:t.map(({id:a})=>a)}},{id:{in:i.map(({id:a})=>a)}}]}]}}let c=a.dateRange?a.dateRange.to?{OR:[{startDate:{gte:a.dateRange?.from,lte:a.dateRange?.to}},{endDate:{gte:a.dateRange.from,lte:a.dateRange?.to}}]}:{OR:[{startDate:a.dateRange?.from},{endDate:a.dateRange?.from}]}:{},p={...o,...c,organizationCampaign:"actual"===r?{endDate:null}:{endDate:{not:null}},user:{organizations:{some:{id:e.session.organizationId}}}},{sortBy:m,sortOrder:u}=a.sorting??{sortBy:"startDate",sortOrder:"desc"};t="product"===m?{product:{name:u}}:"responsible"===m?{user:{firstName:u}}:{[m]:u};let l=await e.prisma.initiative.findMany({where:p,orderBy:t,skip:"number"==typeof i&&n?i*n:void 0,take:n,include:{kpi:!0,user:!0,product:!0,organizationCampaign:{include:{organizationCampaignKpiBenchmarks:{include:{productKpiBenchmarks:!0}}}}}}),g=await e.prisma.initiative.count({where:p}),h=await Promise.all(l.map(async a=>{let t=await e.prisma.productCampaign.findMany({where:{establishmentCampaign:{organizationCampaignId:a.organizationCampaignId},productId:a.productId},include:d.ob});return{...a,productCampaigns:t}})),w=await Promise.all(h.map(async({name:a,kpi:t,endDate:i,description:n,kpiId:r,objective:o,responsibleId:c,productId:p,product:m,startDate:u,user:l,id:g,reference:h,organizationCampaign:w,productCampaigns:y})=>{let f=null;if("LastCampaign"===h){let a=await (0,d.HK)(u,p,e,e.session.organizationId);f=(0,d.qR)(a??null,r,t.key)??1}else"Benchmark"===h&&(f=(0,d.GY)(w.organizationCampaignKpiBenchmarks,r,p)??1);let C=(0,d.qR)(y,r,t.key);return{id:g,kpiId:r,description:n,name:a,category:t.category,kpi:t,unit:t.unit,productId:p,product:m.name,objective:o,objectiveToShow:(0,s.N)(o),startDate:u,endDate:i,performanceToShow:(0,d.iw)(C,h,f),responsible:l.firstName,responsibleId:c,reference:h}}));return{initiatives:w,total:g}}),getInitiativesModalData:c.U5.query(async({ctx:a})=>{let e=await a.prisma.product.findMany({where:{productCampaigns:{some:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}},select:{id:!0,name:!0}}),t=await a.prisma.kpi.findMany({select:{id:!0,name:!0,unit:!0},orderBy:{createdAt:"asc"}}),i=await a.prisma.user.findMany({where:{organizations:{some:{id:a.session.organizationId}}},select:{id:!0,firstName:!0,lastName:!0,email:!0}});return{products:e,kpis:t,orgUsers:i}}),deleteInitiative:c.U5.input(r.z.object({initiativeId:r.z.string()})).mutation(async({ctx:a,input:e})=>{let t=await a.prisma.initiative.delete({where:{id:e.initiativeId}});if(!t)throw new n.TRPCError({code:"NOT_FOUND",message:"Initiative not found or couldn't be deleted."})}),updateInitiative:c.U5.input(r.z.object({initiativeId:r.z.string(),name:r.z.string().optional(),productId:r.z.string().optional(),description:r.z.string().optional().nullable(),kpiId:r.z.string().optional(),objective:r.z.number().optional(),startDate:r.z.date().optional(),endDate:r.z.date().optional(),reference:r.z.enum(["LastCampaign","Benchmark","Custom"]),responsibleId:r.z.string().optional()})).mutation(async({ctx:a,input:e})=>{let{initiativeId:t,...i}=e,r=await a.prisma.organizationCampaign.findMany({where:{organization:{id:{equals:a.session.organizationId}},establishmentCampaigns:{some:{productCampaigns:{some:{productId:e.productId}}}}},orderBy:{startDate:"desc"},take:2});if(!r[0])throw new n.TRPCError({code:"NOT_FOUND",message:"No valid organization campaign was found for the given product in this organization."});if("LastCampaign"===e.reference&&r.length<2)throw new n.TRPCError({code:"NOT_FOUND",message:o.R6});let s=r[0].id;if("Benchmark"===e.reference){let t=await a.prisma.organizationCampaignKpiBenchmark.findFirst({where:{organizationCampaignId:s,kpiId:e.kpiId}});if(!t)throw new n.TRPCError({code:"NOT_FOUND",message:o.SX})}return await a.prisma.initiative.update({where:{id:t},data:{...i,organizationCampaignId:s}})})});i()}catch(a){i(a)}})},9010:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{G:()=>h});var n=t(5423),r=t(3303),o=t(2937),s=t(8432),d=t(9344),c=t.n(d),p=t(9926),m=t(5401),u=t(8237),l=t(6723),g=a([n,o,p,m,u,l]);[n,o,p,m,u,l]=g.then?(await g)():g;let h=(0,u.hA)({getUsers:u.U5.query(async({ctx:a})=>{let e=await a.prisma.user.findMany({where:{organizations:{some:{id:a.session.organizationId}},id:{not:a.session.user.id}}}),t=await a.prisma.invitation.findMany({where:{organizationId:a.session.organizationId,invitationStatus:"Pending"},include:{user:!0}}),i=[a.session.user,...e],n=t.map(a=>a.user),r=[...i.map(a=>({...a,pendingInvite:!1})),...n.map(a=>({...a,pendingInvite:!0}))];return r}),removeUserFromOrganization:u.U5.input(p.z.object({userId:p.z.string()})).mutation(async({ctx:a,input:e})=>{let t=await a.prisma.invitation.findFirst({where:{userId:e.userId,organizationId:a.session.organizationId,invitationStatus:{not:"Revoked"}}});t&&await a.prisma.invitation.update({where:{id:t.id},data:{invitationStatus:"Revoked"}}),await a.prisma.organization.update({where:{id:a.session.organizationId},data:{users:{disconnect:{id:e.userId}}}})}),inviteUser:u.U5.input(p.z.object({email:p.z.string()})).mutation(async({ctx:a,input:e})=>{let t=await a.prisma.user.findUnique({where:{email:e.email},include:{organizations:!0}});if(!t){let t=(0,r.createId)(),i=await (0,s.hash)(t,l.P),o=await a.prisma.kpi.findMany(),d=await a.prisma.user.create({data:{hashedPassword:i,email:e.email,homePageKpis:{connect:o.map(a=>({id:a.id}))}}}),p=await a.prisma.invitation.create({data:{organizationId:a.session.organizationId,userId:d.id}}),u=c().sign({invitationId:p.id},m.O.JWT_SECRET_KEY);return await (0,n.Cz)({to:e.email,subject:"Bienvenido/a a Cacta!",Email:n.k6,emailProps:{organizationName:a.session.organizationCampaign.organization.name,password:t,userName:a.session.user.firstName??a.session.user.email,token:u}})}let i=await a.prisma.invitation.findMany({where:{userId:t.id}});if(i.length>0&&i.some(a=>"Pending"===a.invitationStatus))throw new o.TRPCError({code:"CONFLICT",message:"pendingInvitation"});if(t.organizations.length>0){if(t.organizations[0]?.id===a.session.organizationId)throw new o.TRPCError({code:"CONFLICT",message:"userInThisOrganization"});throw new o.TRPCError({code:"CONFLICT",message:"userInOtherOrganization"})}let d=await a.prisma.invitation.create({data:{organizationId:a.session.organizationId,userId:t.id}}),p={invitationId:d.id},u=c().sign(p,m.O.JWT_SECRET_KEY);await (0,n.Cz)({to:e.email,subject:"Has sido invitado a una organizaci\xf3n en Cacta",Email:n.n_,emailProps:{organizationName:a.session.organizationCampaign.organization.name,userName:a.session.user.firstName??a.session.user.email,invitedUserName:t.firstName??t.email,token:u}})}),acceptInvite:u.$y.input(p.z.object({invitationId:p.z.string()})).mutation(async({ctx:a,input:e})=>{let t=await a.prisma.invitation.findFirst({where:{id:e.invitationId}});if(!t||t?.invitationStatus==="Revoked"||t?.invitationStatus==="Accepted")throw new o.TRPCError({code:"CONFLICT",message:"invalidInvitation"});await a.prisma.invitation.update({where:{id:t.id},data:{invitationStatus:"Accepted"}}),await a.prisma.organization.update({where:{id:t.organizationId},data:{users:{connect:{id:t.userId}}}})})});i()}catch(a){i(a)}})},8609:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{v:()=>s});var n=t(9926),r=t(8237),o=a([n,r]);[n,r]=o.then?(await o)():o;let s=(0,r.hA)({summaryByProduct:r.U5.input(n.default.object({category:n.default.enum(["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"])})).query(async({ctx:a,input:e})=>{let t=await a.prisma.kpi.findMany({where:{category:e.category},include:{organizationCampaignKpiBenchmarks:{where:{organizationCampaignId:a.session.organizationCampaign.id},include:{productKpiBenchmarks:!0}}}}),i=await a.prisma.productKpi.findMany({where:{productCampaign:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpi:{category:e.category}},include:{scopes:!0,waterComposition:!0,productCampaign:{include:{product:!0}}}});return{kpiBenchmarks:t,productKpis:i}}),summaryByEstablishment:r.U5.input(n.default.object({category:n.default.enum(["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"])})).query(async({ctx:a,input:{category:e}})=>{let t=await a.prisma.establishmentCampaign.findMany({where:{organizationCampaignId:a.session.organizationCampaign.id},include:{establishment:!0,productCampaigns:{include:{product:!0,productKpis:{include:{kpi:!0,scopes:!0,waterComposition:!0},where:{kpi:{category:e}},orderBy:{kpi:{createdAt:"asc"}}}}}}});return t})});i()}catch(a){i(a)}})},3355:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{j:()=>c});var n=t(2937),r=t(9926),o=t(5978),s=t(8237),d=a([n,r,s]);[n,r,s]=d.then?(await d)():d;let c=(0,s.hA)({productsAndCampaignsList:s.U5.query(async({ctx:a})=>{let e=await a.prisma.organizationCampaign.findMany({where:{organizationId:a.session.organizationId},orderBy:{startDate:"desc"}});if(!e)throw new n.TRPCError({code:"NOT_FOUND"});let t=await Promise.all(e.map(async e=>{let t=await a.prisma.product.findMany({where:{productCampaigns:{every:{endDate:{not:null},harvestedAmount:{not:null}},some:{establishmentCampaign:{organizationCampaignId:e.id}}}},select:{id:!0,name:!0}}),i=await a.prisma.product.count({where:{productCampaigns:{some:{establishmentCampaign:{organizationCampaignId:e.id}}}}});return{id:e.id,startDate:e.startDate,endDate:e.endDate,products:t,totalProducts:i}}));return t}),ecoScoreData:s.U5.input(r.default.object({productId:r.default.string().optional(),organizationCampaignId:r.default.string().optional()})).query(async({ctx:a,input:e})=>{let t=await a.prisma.organizationCampaign.findMany({where:{organizationId:a.session.organizationId},orderBy:{startDate:"desc"},select:{id:!0}}),i=t.findIndex(a=>a.id===e.organizationCampaignId)+1,n=t[i]?.id,r=await a.prisma.kpiScore.findMany({where:{organizationCampaignScore:{organizationCampaignId:e.organizationCampaignId,productId:e.productId??null}},include:{kpi:!0},orderBy:{kpi:{createdAt:"asc"}}}),o=n?await a.prisma.kpiScore.findMany({where:{organizationCampaignScore:{organizationCampaignId:n,productId:e.productId??null}},include:{kpi:!0}}):[],s=["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"].map(a=>({categoryKey:a,kpiResults:r.filter(e=>e.kpi.category===a).map(a=>({kpiId:a.kpiId,kpiName:a.kpi.name,ecoScoreValue:a.ecoScoreValue,ecoScoreGrade:a.ecoScoreGrade,previousCampaignGrade:o.find(e=>e.kpiId===a.kpiId)?.ecoScoreGrade}))})),d=await a.prisma.organizationCampaignScore.findFirst({where:{organizationCampaignId:e.organizationCampaignId,productId:e.productId??null}});return{kpiEcoScores:s,totalEcoScore:d}}),getProductScore:s.U5.input(r.default.object({pageSize:r.default.number().optional(),pageIndex:r.default.number().optional(),searchQuery:r.default.string().nullish(),locale:r.default.string().nullish()})).query(async({ctx:a,input:{pageIndex:e,pageSize:t,searchQuery:i,locale:n}})=>{let r=i?await a.prisma.$queryRaw`
        SELECT pc."id" FROM "ProductCampaign" as pc
        JOIN "Product" as p ON pc."productId" = p."id"
        WHERE unaccent(p."name"->>${n||"en"}) ilike unaccent(${`%${i}%`})`:null,o=r?{id:{in:r.map(({id:a})=>a)}}:{},s=(await a.prisma.product.findMany({where:{productCampaigns:{some:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},every:{endDate:{not:null}}}}})).map(a=>a.id),d={...o,establishmentCampaign:{organizationCampaign:{organizationId:a.session.organizationId}},endDate:{not:null},productId:{in:s}},c=await a.prisma.productCampaign.count({where:d}),p=await a.prisma.productCampaign.findMany({where:d,select:{id:!0,product:{select:{id:!0,name:!0,cpcId:!0,cpcName:!0}},startDate:!0,endDate:!0,establishmentCampaign:{select:{organizationCampaign:{select:{id:!0,startDate:!0,endDate:!0,projectId:!0}}}}},skip:"number"==typeof e&&t?e*t:void 0,take:t}),m=p.reduce((a,e)=>{let t=a.find(a=>a.product.id===e.product.id&&a.organizationCampaignId===e.establishmentCampaign.organizationCampaign.id);return t?(t.startDate=new Date(Math.min(new Date(t.startDate).getTime(),new Date(e.startDate).getTime())),t.endDate=new Date(Math.max(new Date(t.endDate??"").getTime(),new Date(e.endDate??"").getTime()))):a.push({product:e.product,startDate:e.startDate,endDate:e.endDate,organizationCampaignId:e.establishmentCampaign.organizationCampaign.id,projectId:e.establishmentCampaign.organizationCampaign.projectId}),a},[]);return{productCampaigns:Object.values(m),total:c}}),getActivityInputsByProduct:s.U5.input(r.default.object({organizationCampaignId:r.default.string(),productId:r.default.string()})).query(async({ctx:a,input:{organizationCampaignId:e,productId:t}})=>{let i=await a.prisma.productCampaign.findMany({where:{establishmentCampaign:{organizationCampaignId:e},productId:t},select:{productKpis:{select:{activityProductKpis:{select:{activityInputs:!0}},kpi:!0},orderBy:{kpi:{createdAt:"asc"}}},harvestedAmount:!0}}),n=i.reduce((a,{harvestedAmount:e})=>a+=e??0,0),r=i.reduce((a,e)=>(e.productKpis.forEach(e=>{let{id:t,name:i,category:n,unit:r,key:o}=e.kpi;a[t]||(a[t]={kpiName:i,kpiKey:o,category:n,unit:r,totals:{upstream:0,core:0,transportation:0,downstream:0,totalValue:0}}),e.activityProductKpis.forEach(({activityInputs:e})=>{e.forEach(e=>{let i=a[t];i&&(i.totals.upstream+=e.upstream,i.totals.core+=e.core,i.totals.transportation+=e.transportation,i.totals.downstream+=e.downstream,i.totals.totalValue+=e.totalValue)})})}),a),{}),s=Object.values(r).reduce((a,e)=>{let t=a.find(a=>a.categoryName===e.category);return t?t.kpis.push(e):a.push({categoryName:e.category,kpis:[e]}),a},[]),d=["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"];s.sort((a,e)=>d.indexOf(a.categoryName)-d.indexOf(e.categoryName));let c=s.map(a=>({categoryName:a.categoryName,kpis:a.kpis.map(a=>({...a,totals:{upstream:(0,o.N)(a.totals.upstream/(1e3*n),3),core:(0,o.N)((a.totals.core+a.totals.transportation)/(1e3*n),3),downstream:(0,o.N)(a.totals.downstream/(1e3*n),3),totalValue:(0,o.N)(a.totals.totalValue/(1e3*n),3)}}))}));return c})});i()}catch(a){i(a)}})},4051:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{N:()=>p});var n=t(2937),r=t(9926),o=t(2053),s=t(4593),d=t(8237),c=a([n,r,o,s,d]);[n,r,o,s,d]=c.then?(await c)():c;let p=(0,d.hA)({editProfile:d.U5.input(r.z.object({profilePictureUrl:r.z.object({name:r.z.string(),data:r.z.string()}).nullable().optional(),firstName:r.z.string().optional().nullable(),lastName:r.z.string().optional().nullable()})).mutation(async({ctx:a,input:{profilePictureUrl:e,firstName:t,lastName:i}})=>{let n=a.session.user.id,r=e?.name,d=e?.name===a.session.user.profilePictureUrl;return e&&!d&&(r=await (0,s.H)(e)),!a.session.user.profilePictureUrl||d&&e||await (0,o.i)(a.session.user.profilePictureUrl),await a.prisma.user.update({where:{id:n},data:{firstName:t,lastName:i,profilePictureUrl:r??null},include:{organizations:!0}})}),kpis:d.U5.query(async({ctx:a})=>{let e=a.session.user.id,t=await a.prisma.user.findUnique({where:{id:e},select:{homePageKpis:!0}});if(!t)throw new n.TRPCError({code:"NOT_FOUND"});let i=await a.prisma.kpi.findMany(),r=(await a.prisma.organizationCampaignKpiBenchmark.findMany({where:{organizationCampaignId:a.session.organizationCampaign.id},select:{kpiId:!0}})).map(a=>a.kpiId),o=["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"].map(a=>({categoryKey:a,kpis:i.filter(e=>e.category===a).map(a=>({...a,enabled:r.includes(a.id)}))}));return{userKpis:t.homePageKpis,kpisByCategory:o}}),removeKpi:d.U5.input(r.z.object({kpiId:r.z.string()})).mutation(async({ctx:a,input:e})=>{let t=a.session.user.id;await a.prisma.user.update({where:{id:t},data:{homePageKpis:{disconnect:{id:e.kpiId}}}})}),addKpi:d.U5.input(r.z.object({kpiId:r.z.string()})).mutation(async({ctx:a,input:e})=>{let t=a.session.user.id;await a.prisma.user.update({where:{id:t},data:{homePageKpis:{connect:{id:e.kpiId}}}})}),reset:d.U5.mutation(async({ctx:a})=>{let e=a.session.user.id,t=await a.prisma.kpi.findMany();await a.prisma.user.update({where:{id:e},data:{homePageKpis:{connect:t.map(a=>({id:a.id}))}}})})});i()}catch(a){i(a)}})},8237:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{$y:()=>g,U5:()=>h,hA:()=>u,uw:()=>createTRPCContext});var n=t(920),r=t(2937),o=t(72),s=t.n(o),d=t(9926),c=t(6508),p=a([r,d,c]);[r,d,c]=p.then?(await p)():p;let createInnerTRPCContext=a=>({session:a.session,prisma:n.prisma}),createTRPCContext=async a=>{let{req:e,res:t}=a,i=await (0,c.W)({req:e,res:t});return createInnerTRPCContext({session:i})},m=r.initTRPC.context().create({transformer:s(),errorFormatter:({shape:a,error:e})=>({...a,data:{...a.data,zodError:e.cause instanceof d.ZodError?e.cause.flatten():null}})}),u=m.router,l=m.middleware(async({ctx:a,next:e})=>{if(!a.session||!a.session.user)throw new r.TRPCError({code:"UNAUTHORIZED"});let t=a.session.user.id,i=await a.prisma.user.findUnique({where:{id:t},select:{organizations:!0}});if(!i)throw new r.TRPCError({code:"UNAUTHORIZED"});let n=i.organizations[0]?.id;if(!n)throw new r.TRPCError({code:"UNAUTHORIZED"});let o=await a.prisma.organizationCampaign.findFirst({where:{organizationId:n},orderBy:{startDate:"desc"},include:{organization:!0}});if(!o)throw new r.TRPCError({code:"NOT_FOUND"});return e({ctx:{session:{...a.session,user:a.session.user,organizationId:n,organizationCampaign:o}}})}),g=m.procedure,h=m.procedure.use(l);i()}catch(a){i(a)}})},2053:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{i:()=>deleteFromImageBucket});var n=t(1841),r=t(5401),o=t(6115),s=a([r,o]);[r,o]=s.then?(await s)():s;let deleteFromImageBucket=async a=>{let e=(0,o.g)(),t=a.split("/"),i=t[t.length-1],s=new n.DeleteObjectCommand({Bucket:r.O.IMAGE_BUCKET_NAME,Key:i});await e.send(s)};i()}catch(a){i(a)}})},6115:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{g:()=>getS3Client});var n=t(1841),r=t(5401),o=a([r]);r=(o.then?(await o)():o)[0];let getS3Client=()=>process.env.IS_OFFLINE?new n.S3Client({endpoint:"http://localhost:9000",region:"us-east-1",forcePathStyle:!0,credentials:{accessKeyId:r.O.IMAGE_BUCKET_ACCESS_KEY_ID,secretAccessKey:r.O.IMAGE_BUCKET_SECRET_ACCESS_KEY}}):new n.S3Client({region:r.O.IMAGE_BUCKET_AWS_REGION||"us-east-1",forcePathStyle:!0,credentials:{accessKeyId:r.O.IMAGE_BUCKET_ACCESS_KEY_ID,secretAccessKey:r.O.IMAGE_BUCKET_SECRET_ACCESS_KEY}});i()}catch(a){i(a)}})},4593:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{H:()=>uploadToImageBucket});var n=t(1841),r=t(3303),o=t(2937),s=t(9926),d=t(5401),c=t(6115),p=a([o,s,d,c]);[o,s,d,c]=p.then?(await p)():p;let m=s.z.enum(["jpg","jpeg","png","gif"]),u={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif"},uploadToImageBucket=async a=>{let e=a.name.split(".").pop(),t=m.safeParse(e);if(!t.success)throw new o.TRPCError({code:"UNPROCESSABLE_CONTENT"});let i=t.data,s=`${(0,r.createId)()}.${i}`,p=new n.PutObjectCommand({Bucket:d.O.IMAGE_BUCKET_NAME,Key:s,ContentType:u[i],Body:Buffer.from(a.data.replace(/data:image\/\w+;base64,/,""),"base64")}),l=(0,c.g)();await l.send(p);let g=`${d.O.NEXT_PUBLIC_IMAGE_BUCKET_BASE_URL}/${s}`;return g};i()}catch(a){i(a)}})},5634:(a,e,t)=>{t.d(e,{CV:()=>i,R6:()=>n,SX:()=>r});let i="Error: Incorrect password",n="Error: At least two organization campaigns are required for comparison vs last campaign reference.",r="Error: There is no benchmark for selected kpi for comparison vs benchmark reference."},9511:(a,e,t)=>{t.d(e,{JU:()=>intensityKPI});let intensityKPI=a=>"WaterProductivity"===a},5978:(a,e,t)=>{t.d(e,{N:()=>round});let round=(a,e=1,t=!1)=>1e6>Math.abs(a)&&Math.abs(a)>=1||0===a?a.toLocaleString("en",{minimumFractionDigits:e,maximumFractionDigits:e}):t?"< 1.0":a.toExponential(2)},7664:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{O:()=>s});var n=t(3594),r=t(9926),o=a([n,r]);[n,r]=o.then?(await o)():o;let s=(0,n.createEnv)({server:{SES_ACCESS_KEY:r.z.string(),SES_SECRET_ACCESS_KEY:r.z.string(),SES_EMAIL_REGION:r.z.string().optional(),USE_SES:r.z.enum(["true","false"]),EMAIL_HOST:r.z.string().optional(),EMAIL_PORT:r.z.string().optional(),EMAIL_USERNAME:r.z.string().optional(),EMAIL_PASSWORD:r.z.string().optional(),EMAIL_SENDER:r.z.string()},clientPrefix:"NEXT_PUBLIC_",client:{NEXT_PUBLIC_BASE_URL:r.z.string()},skipValidation:"true"===process.env.IS_CI,runtimeEnv:process.env});i()}catch(a){i(a)}})},5423:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{Cz:()=>n.C,k6:()=>r.k6,n_:()=>r.n_});var n=t(2172),r=t(7028),o=a([n,r]);[n,r]=o.then?(await o)():o,i()}catch(a){i(a)}})},9690:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{h:()=>getTransport});var n=t(4298),r=t(5184),o=t.n(r),s=t(7664),d=a([s]);s=(d.then?(await d)():d)[0];let SESTransport=()=>{let a=new n.SES({credentials:{accessKeyId:s.O.SES_ACCESS_KEY,secretAccessKey:s.O.SES_SECRET_ACCESS_KEY},region:s.O.SES_EMAIL_REGION??"us-east-2"});return o().createTransport({SES:{aws:n,ses:a}})},developmentTransport=()=>o().createTransport({host:s.O.EMAIL_HOST,port:parseInt(s.O.EMAIL_PORT??"1025"),auth:{user:s.O.EMAIL_USERNAME,pass:s.O.EMAIL_PASSWORD}}),getTransport=()=>"true"===s.O.USE_SES?SESTransport():developmentTransport();i()}catch(a){i(a)}})},2172:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{C:()=>sendEmail});var n=t(8816),r=t(7664),o=t(9690),s=a([n,r,o]);[n,r,o]=s.then?(await s)():s;let sendEmail=async({to:a,subject:e,Email:t,emailProps:i})=>{let s=(0,o.h)(),d=(0,n.render)(t(i));await s.sendMail({from:r.O.EMAIL_SENDER,to:a,subject:e,html:d})};i()}catch(a){i(a)}})},576:(a,e,t)=>{t.a(a,async(a,e)=>{try{t(997),t(6689);var i=t(7717),n=t(7664),r=a([i,n]);[i,n]=r.then?(await r)():r,e()}catch(a){e(a)}})},5187:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var n=t(997);t(6689);var r=t(7717),o=t(7664),s=a([r,o]);[r,o]=s.then?(await s)():s;let __WEBPACK_DEFAULT_EXPORT__=({userName:a,password:e,organizationName:t,token:i})=>n.jsx(r.Tailwind,{children:(0,n.jsxs)(r.Html,{children:[n.jsx(r.Head,{children:n.jsx(r.Font,{fontFamily:"Poppins",fallbackFontFamily:"Verdana",webFont:{url:"https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1xlFd2JQEk.woff2",format:"woff2"}})}),n.jsx(r.Preview,{children:"Bienvenido/a a Cacta"}),n.jsx(r.Body,{children:n.jsx(r.Container,{className:"mx-auto my-0 mb-16 bg-white pb-12 pt-5",children:(0,n.jsxs)(r.Section,{children:[n.jsx(r.Section,{className:"mb-10 flex w-full justify-center",children:n.jsx(r.Img,{src:`${o.O.NEXT_PUBLIC_BASE_URL}/icons/logoBlackLetters.svg`,alt:"Cacta",width:240,height:70})}),n.jsx(r.Text,{className:"mb-8 font-primary text-sm font-normal not-italic leading-4",children:"Bienvenido/a a Cacta!"}),(0,n.jsxs)(r.Text,{className:"mb-8 text-justify text-sm font-normal not-italic",children:[n.jsx("span",{className:"text-[#8e33ff]",children:a})," te ha invitado a unirte a la organizaci\xf3n ",n.jsx("span",{className:"text-[#8e33ff]",children:t}),' en Cacta. Para aceptar la invitaci\xf3n has click en "Confirmar".']}),(0,n.jsxs)(r.Text,{className:"mb-10 text-justify text-sm font-extrabold not-italic",children:["Tu contrase\xf1a temporal es: ",n.jsx("span",{className:"text-[#8e33ff]",children:e}),n.jsx("br",{})," Ser\xe1s redirigido para cambiar tu contrase\xf1a luego de ingresar por primera vez a la plataforma."]}),n.jsx(r.Button,{className:"flex w-full items-center justify-center rounded-lg bg-[#8e33ff] p-3 text-center font-secondary text-sm font-medium leading-5 text-white ring-offset-background transition-colors focus-visible:outline-none",href:`${o.O.NEXT_PUBLIC_BASE_URL}/confirm-invite?token=${i}`,children:"Confirmar"})]})})})]})});i()}catch(a){i(a)}})},4672:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var n=t(997);t(6689);var r=t(7717),o=t(846),s=t(4116),d=t(7664),c=a([r,o,s,d]);[r,o,s,d]=c.then?(await c)():c;let __WEBPACK_DEFAULT_EXPORT__=({userName:a,organizationName:e,invitedUserName:t,token:i})=>n.jsx(r.Tailwind,{children:(0,n.jsxs)(r.Html,{children:[n.jsx(s.Head,{children:n.jsx(o.Font,{fontFamily:"Poppins",fallbackFontFamily:"Verdana",webFont:{url:"https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1xlFd2JQEk.woff2",format:"woff2"}})}),n.jsx(r.Preview,{children:"Has sido invitado a una organizaci\xf3n en Cacta"}),n.jsx(r.Body,{children:n.jsx(r.Container,{className:"mx-auto my-0 mb-16 bg-white pb-12 pt-5",children:(0,n.jsxs)(r.Section,{children:[n.jsx(r.Section,{className:"mb-10 flex w-full justify-center",children:n.jsx(r.Img,{src:`${d.O.NEXT_PUBLIC_BASE_URL}/icons/logoBlackLetters.svg`,alt:"Cacta",width:240,height:70})}),(0,n.jsxs)(r.Text,{className:"mb-8 font-primary text-sm font-normal not-italic leading-4",children:["Hola ",t,"!"]}),(0,n.jsxs)(r.Text,{className:"mb-8 text-justify text-sm font-normal not-italic",children:[n.jsx("span",{className:"text-[#8e33ff]",children:a})," te ha invitado a unirte a la organizaci\xf3n ",n.jsx("span",{className:"text-[#8e33ff]",children:e}),' en Cacta. Para aceptar la invitaci\xf3n, haz clic en "Confirmar".']}),n.jsx(r.Button,{className:"inline-flex w-full items-center justify-center rounded-lg bg-[#8e33ff] p-3 text-center font-secondary text-sm font-medium leading-5 text-white ring-offset-background transition-colors focus-visible:outline-none",href:`${d.O.NEXT_PUBLIC_BASE_URL}/confirm-invite?token=${i}`,children:"Confirmar"})]})})})]})});i()}catch(a){i(a)}})},7028:(a,e,t)=>{t.a(a,async(a,i)=>{try{t.d(e,{k6:()=>r.Z,n_:()=>o.Z});var n=t(576),r=t(5187),o=t(4672),s=a([n,r,o]);[n,r,o]=s.then?(await s)():s,i()}catch(a){i(a)}})}};var e=require("../../../webpack-api-runtime.js");e.C(a);var __webpack_exec__=a=>e(e.s=a),t=e.X(0,[1471,6508],()=>__webpack_exec__(6568));module.exports=t})();