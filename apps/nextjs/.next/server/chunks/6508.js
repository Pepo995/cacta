"use strict";exports.id=6508,exports.ids=[6508],exports.modules={3507:(E,e,r)=>{r.a(E,async(E,s)=>{try{r.d(e,{Z:()=>o});var _=r(920),t=r(8432),i=r(7449),n=r.n(i),S=r(9926),a=E([S]);S=(a.then?(await a)():a)[0];let A=S.default.object({email:S.default.string().email(),password:S.default.string().min(8)}),o=n()({name:"Credentials",credentials:{email:{type:"text"},password:{type:"password"}},async authorize(E){let e=A.safeParse(E);if(!e.success)return null;let{email:r,password:s}=e.data,i=await _.prisma.user.findUnique({where:{email:r}});if(!i)return null;let n=await (0,t.compare)(s,i.hashedPassword);return n?i:null}});s()}catch(E){s(E)}})},6508:(E,e,r)=>{r.a(E,async(E,s)=>{try{r.d(e,{L:()=>A,W:()=>getServerAuthSession});var _=r(920),t=r(3227),i=r(6584),n=r(5401),S=r(3507),a=E([n,S]);[n,S]=a.then?(await a)():a;let A={providers:[S.Z],session:{strategy:"jwt"},secret:n.O.NEXTAUTH_SECRET,callbacks:{async jwt({token:E,user:e}){if(e)return{...E,id:e.id,firstName:e.firstName,lastName:e.lastName,pendingVerification:e.pendingVerification,profilePictureUrl:e.profilePictureUrl};let r=await _.prisma.user.findUnique({where:{id:E.id}});return r?{...E,firstName:r.firstName,lastName:r.lastName,pendingVerification:r.pendingVerification,profilePictureUrl:r.profilePictureUrl}:E},session:({session:E,token:e})=>({...E,user:{...E.user,...e}})},pages:{signIn:i.H4,error:i.H4}},getServerAuthSession=E=>(0,t.getServerSession)(E.req,E.res,A);s()}catch(E){s(E)}})},6584:(E,e,r)=>{r.d(e,{H4:()=>s});let s="/sign-in"},920:(E,e,r)=>{r.d(e,{prisma:()=>t});var s=r(3524);let _=globalThis,t=_.prisma||new s.PrismaClient({log:["error"]})},5401:(E,e,r)=>{r.a(E,async(E,s)=>{try{r.d(e,{O:()=>n});var _=r(6206),t=r(9926),i=E([_,t]);[_,t]=i.then?(await i)():i;let n=(0,_.createEnv)({server:{DATABASE_URL:t.z.string().url(),NODE_ENV:t.z.enum(["development","test","production"]),NEXTAUTH_SECRET:t.z.string(),NEXTAUTH_URL:t.z.string().url(),USE_SES:t.z.enum(["true","false"]),EMAIL_SENDER:t.z.string(),EMAIL_HOST:t.z.string().optional(),EMAIL_USERNAME:t.z.string().optional(),EMAIL_PASSWORD:t.z.string().optional(),EMAIL_PORT:t.z.string().optional(),SES_ACCESS_KEY:t.z.string(),SES_SECRET_ACCESS_KEY:t.z.string(),SES_EMAIL_REGION:t.z.string(),IMAGE_BUCKET_AWS_REGION:t.z.string(),IMAGE_BUCKET_NAME:t.z.string(),IMAGE_BUCKET_ACCESS_KEY_ID:t.z.string(),IMAGE_BUCKET_SECRET_ACCESS_KEY:t.z.string(),JWT_SECRET_KEY:t.z.string()},client:{NEXT_PUBLIC_BASE_URL:t.z.string().url(),NEXT_PUBLIC_IMAGE_BUCKET_BASE_URL:t.z.string().url(),NEXT_PUBLIC_MAPS_API_KEY:t.z.string(),NEXT_PUBLIC_ENGINE_ENDPOINT:t.z.string()},runtimeEnv:{DATABASE_URL:process.env.DATABASE_URL,NODE_ENV:"production",NEXTAUTH_SECRET:process.env.NEXTAUTH_SECRET,NEXTAUTH_URL:process.env.NEXTAUTH_URL,IMAGE_BUCKET_AWS_REGION:process.env.IMAGE_BUCKET_AWS_REGION,IMAGE_BUCKET_NAME:process.env.IMAGE_BUCKET_NAME,IMAGE_BUCKET_ACCESS_KEY_ID:process.env.IMAGE_BUCKET_ACCESS_KEY_ID,IMAGE_BUCKET_SECRET_ACCESS_KEY:process.env.IMAGE_BUCKET_SECRET_ACCESS_KEY,NEXT_PUBLIC_IMAGE_BUCKET_BASE_URL:"http://127.0.0.1:9000/cacta-images/",EMAIL_HOST:process.env.EMAIL_HOST,EMAIL_SENDER:process.env.EMAIL_SENDER,EMAIL_USERNAME:process.env.EMAIL_USERNAME,EMAIL_PASSWORD:process.env.EMAIL_PASSWORD,EMAIL_PORT:process.env.EMAIL_PORT,USE_SES:process.env.USE_SES,SES_ACCESS_KEY:process.env.SES_ACCESS_KEY,SES_SECRET_ACCESS_KEY:process.env.SES_SECRET_ACCESS_KEY,SES_EMAIL_REGION:process.env.SES_EMAIL_REGION,NEXT_PUBLIC_BASE_URL:"http://localhost:3000",NEXT_PUBLIC_MAPS_API_KEY:"AIzaSyAdDmh6536rpIv75AEL7zp4oUdF9F7cY6o",JWT_SECRET_KEY:process.env.JWT_SECRET_KEY,NEXT_PUBLIC_ENGINE_ENDPOINT:"https://cacta-django.onrender.com/platform"},skipValidation:"true"===process.env.IS_CI});s()}catch(E){s(E)}})}};