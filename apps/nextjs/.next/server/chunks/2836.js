"use strict";exports.id=2836,exports.ids=[2836],exports.modules={9495:(a,e,i)=>{i.d(e,{GY:()=>findBenchmark,HK:()=>findPreviousProductCampaigns,iw:()=>calculatePerformanceComparison,ob:()=>r,qR:()=>findKpiPerformance});var t=i(261),n=i(3411);let r={establishmentCampaign:{select:{organizationCampaign:{include:{organizationCampaignKpiBenchmarks:!0}}}},productKpis:!0},findBenchmark=(a,e,i)=>{let t=a.find(a=>a?.kpiId===e);if(t){let a=t.productKpiBenchmarks.find(a=>a.productId===i);return a?.benchmark??t.benchmark}return null},findKpiPerformance=(a,e,i)=>{let n=0,r=0;if(a)for(let i of a){if(!i.endDate)return null;let a=i.productKpis.filter(a=>a.kpiId===e).reduce((a,e)=>a+e.totalValue,0);r+=a,n+=i.harvestedAmount??0}return(0,t.JU)(i)?r:n?r/n:0},calculatePerformanceComparison=(a,e,i)=>a?"Custom"!==e?i?(0,n.N)((a-i)/i*100):0:(0,n.N)(a):null,findPreviousProductCampaigns=async(a,e,i,t)=>{let n=await i.prisma.organizationCampaign.findFirst({where:{organizationId:t,startDate:{lt:a}},orderBy:{startDate:"desc"}});return await i.prisma.productCampaign.findMany({where:{establishmentCampaign:{organizationCampaignId:n?.id},productId:e},include:r})}},1161:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{q:()=>h});var n=i(6777),r=i(8779),o=i(200),s=i(5381),d=i(5435),c=i(7230),p=i(6933),m=i(8987),l=i(6212),u=i(2601),g=a([n,r,o,s,d,c,p,m,l,u]);[n,r,o,s,d,c,p,m,l,u]=g.then?(await g)():g;let h=(0,u.hA)({auth:r.m,homePage:s.g,monitor:p.v,analyze:n.m,report:m.j,initiative:d.Y,download:o.J,settings:l.N,invitations:c.G});t()}catch(a){t(a)}})},6777:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{m:()=>d});var n=i(9926),r=i(2601),o=a([n,r]);[n,r]=o.then?(await o)():o;let s=n.default.enum(["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"]),d=(0,r.hA)({productsAndKpisList:r.U5.input(n.default.object({category:s})).query(async({ctx:a,input:e})=>{let i=await a.prisma.product.findMany({where:{productCampaigns:{every:{endDate:{not:null},harvestedAmount:{not:null}},some:{productKpis:{some:{kpi:{category:e.category}}},establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}}}),t=await a.prisma.kpi.findMany({where:{category:e.category,productKpis:{some:{productCampaign:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}}},orderBy:{createdAt:"asc"}});return{productsList:i,kpisList:t}}),performancePanel:r.U5.input(n.default.object({productIdFilter:n.default.string().optional(),kpiIdFilter:n.default.string().optional(),category:s})).query(async({ctx:a,input:e})=>{let i=(await a.prisma.organizationCampaignKpiBenchmark.findFirst({where:{organizationCampaignId:a.session.organizationCampaign.id,kpiId:e.kpiIdFilter},include:{productKpiBenchmarks:!0}}))?.productKpiBenchmarks.find(a=>a.productId===e.productIdFilter)?.benchmark,t=await a.prisma.activityProductKpi.findMany({where:{productKpi:{kpi:{category:e.category},kpiId:e.kpiIdFilter,productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}},include:{productKpi:{include:{productCampaign:!0}}},orderBy:{activity:"asc"}}),n=t.map(a=>a.id),r=[];t.forEach(a=>{r.some(e=>e===a.activity)||r.push(a.activity)});let o=await a.prisma.activityInput.findMany({where:{activityId:{in:n}},include:{activity:!0,input:!0}}),s=(await a.prisma.productCampaign.findMany({where:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}})).reduce((a,e)=>a+(e.harvestedAmount??0),0),d=(await a.prisma.productKpi.findMany({where:{productCampaign:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id},productId:e.productIdFilter},kpiId:e.kpiIdFilter}})).reduce((a,e)=>e.totalValue+a,0);return{activitiesList:r,activityProductKpis:t,activityInputs:o,benchmark:i,selectedProductAmount:s,organizationCampaign:a.session.organizationCampaign,totalKpi:d}}),electricity:r.U5.input(n.default.object({productIdFilter:n.default.string().optional(),kpiIdFilter:n.default.string().optional()})).query(async({ctx:a,input:e})=>{let i=await a.prisma.productKpi.findMany({where:{productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpiId:e.kpiIdFilter}}),t=i.map(a=>a.id),n=await a.prisma.productKpiElectricitySource.findMany({where:{productKpiId:{in:t}}}),r=await a.prisma.electricitySource.findMany({}),o=r.map(a=>{let e=n.reduce((e,i)=>i.electricitySourceId===a.id?e+i.value:e,0);return{...a,value:e}}),s=o.reduce((a,e)=>e.renewable?a+e.value:a,0),d=o.reduce((a,e)=>e.renewable?a:a+e.value,0),c=s+d;return{electricitySources:o,classification:[{key:"renewable",value:s/c*100},{key:"nonRenewable",value:d/c*100}]}}),waterComposition:r.U5.input(n.default.object({productIdFilter:n.default.string().optional(),kpiIdFilter:n.default.string().optional()})).query(async({ctx:a,input:e})=>{let i=await a.prisma.productKpi.findMany({where:{productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpiId:e.kpiIdFilter},include:{waterComposition:!0}}),t=i.map(a=>a.waterComposition),n={greenFootprint:0,blueFootprint:0,requiredWater:0,rainfall:0,irrigation:0,lostRainfall:0,lostIrrigation:0,balance:0},r=Object.keys(n);r.forEach(a=>{n[a]=t.reduce((e,i)=>e+(i?.[a]??0),0)});let o=r.filter(a=>"blueFootprint"!==a&&"greenFootprint"!==a),s=o.map(a=>({key:a,value:n[a]})),d=n.blueFootprint+n.greenFootprint,c=[{key:"blueFootprint",value:n.blueFootprint/d*100},{key:"greenFootprint",value:n.greenFootprint/d*100}],p=await a.prisma.kpi.findFirst({where:{key:"WaterProductivity"}}),m=(await a.prisma.organizationCampaignKpiBenchmark.findFirst({where:{organizationCampaignId:a.session.organizationCampaign.id,kpi:{key:"WaterProductivity"}}}))?.benchmark,l=await a.prisma.productKpi.findMany({where:{productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpi:{key:"WaterProductivity"}},include:{waterComposition:!0}}),u=l.reduce((a,e)=>a+e.totalValue,0),g={name:p?.name,value:u,unit:p?.unit,benchmark:m};return{barChartData:s,footprints:c,waterProductivity:g}}),performanceStages:r.U5.input(n.default.object({productIdFilter:n.default.string().optional(),category:s})).query(async({ctx:a,input:e})=>{let i=await a.prisma.activityProductKpi.findMany({where:{productKpi:{kpi:{category:e.category},productCampaign:{productId:e.productIdFilter,establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}},include:{productKpi:{include:{productCampaign:!0}},activityInputs:!0},orderBy:{activity:"asc"}}),t=await a.prisma.kpi.findMany({where:{category:e.category}}),n=t.map(a=>({kpiId:a.id,activityProductKpis:i.filter(e=>e.productKpi.kpiId===a.id)})),r=[];return i.forEach(a=>{r.some(e=>e===a.activity)||r.push(a.activity)}),{activitiesList:r,activityProductKpisByKpi:n}})});t()}catch(a){t(a)}})},8779:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{P:()=>p,m:()=>m});var n=i(2937),r=i(8432),o=i(9926),s=i(4631),d=i(2601),c=a([n,o,d]);[n,o,d]=c.then?(await c)():c;let p=12,m=(0,d.hA)({confirmAccount:d.U5.input(o.default.object({newPassword:o.default.string()})).mutation(async({ctx:a,input:{newPassword:e}})=>{let i=a.session.user.id,t=await (0,r.hash)(e,p);await a.prisma.user.update({where:{id:i},data:{hashedPassword:t,pendingVerification:!1}})}),resetPassword:d.U5.input(o.default.object({currentPassword:o.default.string(),newPassword:o.default.string()})).mutation(async({ctx:a,input:{currentPassword:e,newPassword:i}})=>{let t=a.session.user.id,o=await a.prisma.user.findUnique({where:{id:t}});if(!o)throw new n.TRPCError({code:"NOT_FOUND"});let d=await (0,r.compare)(e,o.hashedPassword);if(!d)throw new n.TRPCError({code:"BAD_REQUEST",message:s.CV});let c=await (0,r.hash)(i,p);await a.prisma.user.update({where:{id:t},data:{hashedPassword:c}})})});t()}catch(a){t(a)}})},200:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{J:()=>d});var n=i(9926),r=i(2601),o=i(8987),s=a([n,r,o]);[n,r,o]=s.then?(await s)():s;let d=(0,r.hA)({downloadScorecardPdf:r.U5.input(n.z.object({productId:n.z.string(),organizationCampaignId:n.z.string()})).mutation(async({ctx:a,input:e})=>{let i=await a.prisma.organization.findUnique({where:{id:a.session.organizationId}}),t=o.j.createCaller(a),n=await t.getActivityInputsByProduct({productId:e.productId,organizationCampaignId:e.organizationCampaignId});return{organization:i,activityInputs:n}}),getCampaignsList:r.U5.query(async({ctx:a})=>await a.prisma.organizationCampaign.findMany({where:{organizationId:a.session.organizationId},orderBy:{startDate:"desc"}})),downloadOrganizationData:r.U5.input(n.z.object({format:n.z.enum(["csv","pdf"]),organizationCampaignId:n.z.string().optional()})).mutation(async({ctx:a,input:e})=>{a.session.organizationId,await a.prisma.organizationCampaign.findUnique({where:{id:e.organizationCampaignId},select:{engineId:!0}}),e.format,e.format,await new Promise(a=>{setTimeout(()=>{a()},2e3)})})});t()}catch(a){t(a)}})},5381:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{g:()=>d});var n=i(2937),r=i(261),o=i(2601),s=a([n,o]);[n,o]=s.then?(await s)():s;let getBenchmark=(a,e)=>e.find(e=>e.kpiId===a)?.benchmark??0,getTotalKpi=(a,e,i)=>{let t=e.reduce((e,i)=>i.kpiId===a&&i.productCampaign.harvestedAmount?e+i.totalValue:e,0),n=e.reduce((e,i)=>i.kpiId===a&&i.productCampaign.harvestedAmount?e+i.productCampaign.harvestedAmount:e,0);return(0,r.JU)(i)?t:t/n},getProductsAndValues=(a,e,i)=>{let t=e.filter(e=>e.kpiId===a),n=[],r=new Set;t.forEach(a=>{let e=a.productCampaign.product,i=e.id;r.has(i)||(r.add(i),n.push(e))});let o=n.map(e=>{let n=t.filter(a=>a.productCampaign.productId===e.id);return{name:e.name,value:getTotalKpi(a,n,i)}});return o},d=(0,o.hA)({homePageData:o.U5.query(async({ctx:a})=>{let e=await a.prisma.user.findUnique({where:{id:a.session.user.id},select:{homePageKpis:{orderBy:{createdAt:"asc"}}}});if(!e)throw new n.TRPCError({code:"NOT_FOUND"});let i=e.homePageKpis.map(a=>a.id),t=a.session.organizationCampaign.organization.imageUrl,r=await a.prisma.organizationCampaignKpiBenchmark.findMany({where:{organizationCampaignId:a.session.organizationCampaign.id,kpiId:{in:i}}}),o=r.map(a=>a.kpiId),s=e.homePageKpis.filter(a=>o.includes(a.id)),d=await a.prisma.productKpi.findMany({where:{productCampaign:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpiId:{in:o}},include:{productCampaign:{include:{product:!0}}}}),c=s.map(a=>({id:a.id,benchmark:getBenchmark(a.id,r),totalValue:getTotalKpi(a.id,d,a.key),name:a.name,category:a.category,description:a.description,products:getProductsAndValues(a.id,d,a.key)}));return{homePageData:c,logoUrl:t}})});t()}catch(a){t(a)}})},5435:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{Y:()=>m});var n=i(2937),r=i(9926),o=i(4631),s=i(3411),d=i(9495),c=i(2601),p=a([n,r,c]);[n,r,c]=p.then?(await p)():p;let m=(0,c.hA)({createInitiative:c.U5.input(r.z.object({name:r.z.string(),productId:r.z.string(),description:r.z.string().nullable(),kpiId:r.z.string(),objective:r.z.number(),startDate:r.z.date(),endDate:r.z.date(),reference:r.z.enum(["LastCampaign","Benchmark","Custom"]),responsibleId:r.z.string()})).mutation(async({ctx:a,input:e})=>{let i=await a.prisma.organizationCampaign.findMany({where:{organization:{id:{equals:a.session.organizationId}},establishmentCampaigns:{some:{productCampaigns:{some:{productId:e.productId}}}}},orderBy:{startDate:"desc"},take:2});if(!i[0])throw new n.TRPCError({code:"NOT_FOUND",message:"No valid organization campaign was found for the given product in this organization."});if("LastCampaign"===e.reference&&i.length<2)throw new n.TRPCError({code:"NOT_FOUND",message:o.R6});let t=i[0].id;if("Benchmark"===e.reference){let i=await a.prisma.organizationCampaignKpiBenchmark.findFirst({where:{organizationCampaignId:t,kpiId:e.kpiId}});if(!i)throw new n.TRPCError({code:"NOT_FOUND",message:o.SX})}let r=await a.prisma.initiative.create({data:{...e,organizationCampaignId:t},select:{id:!0}});return r}),getInitiatives:c.U5.input(r.z.object({type:r.z.enum(["actual","past"]),pageSize:r.z.number().optional(),pageIndex:r.z.number().optional(),sorting:r.z.object({sortBy:r.z.string(),sortOrder:r.z.enum(["asc","desc"])}).optional(),searchQuery:r.z.string().nullish(),locale:r.z.string(),dateRange:r.z.object({from:r.z.date().optional(),to:r.z.date().optional()}).optional()})).query(async({input:a,ctx:e})=>{let i;let{pageIndex:t,pageSize:n,type:r}=a,o={};if(a.searchQuery){let i=await e.prisma.$queryRaw`
          SELECT "Initiative"."id" FROM "Initiative"
          INNER JOIN "Kpi" ON "Initiative"."kpiId" = "Kpi"."id"
          WHERE unaccent("Kpi"."name"->>${a.locale}) ILIKE unaccent(${`%${a.searchQuery}%`})
        `,t=await e.prisma.$queryRaw`
          SELECT "Initiative"."id" FROM "Initiative"
          INNER JOIN "Product" ON "Initiative"."productId" = "Product"."id"
          WHERE unaccent("Product"."name"->>${a.locale}) ILIKE unaccent(${`%${a.searchQuery}%`})
        `;o={OR:[{name:{contains:a.searchQuery??void 0,mode:"insensitive"}},{user:{firstName:{contains:a.searchQuery??void 0,mode:"insensitive"}}},{OR:[{id:{in:i.map(({id:a})=>a)}},{id:{in:t.map(({id:a})=>a)}}]}]}}let c=a.dateRange?a.dateRange.to?{OR:[{startDate:{gte:a.dateRange?.from,lte:a.dateRange?.to}},{endDate:{gte:a.dateRange.from,lte:a.dateRange?.to}}]}:{OR:[{startDate:a.dateRange?.from},{endDate:a.dateRange?.from}]}:{},p={...o,...c,organizationCampaign:"actual"===r?{endDate:null}:{endDate:{not:null}},user:{organizations:{some:{id:e.session.organizationId}}}},{sortBy:m,sortOrder:l}=a.sorting??{sortBy:"startDate",sortOrder:"desc"};i="product"===m?{product:{name:l}}:"responsible"===m?{user:{firstName:l}}:{[m]:l};let u=await e.prisma.initiative.findMany({where:p,orderBy:i,skip:"number"==typeof t&&n?t*n:void 0,take:n,include:{kpi:!0,user:!0,product:!0,organizationCampaign:{include:{organizationCampaignKpiBenchmarks:{include:{productKpiBenchmarks:!0}}}}}}),g=await e.prisma.initiative.count({where:p}),h=await Promise.all(u.map(async a=>{let i=await e.prisma.productCampaign.findMany({where:{establishmentCampaign:{organizationCampaignId:a.organizationCampaignId},productId:a.productId},include:d.ob});return{...a,productCampaigns:i}})),w=await Promise.all(h.map(async({name:a,kpi:i,endDate:t,description:n,kpiId:r,objective:o,responsibleId:c,productId:p,product:m,startDate:l,user:u,id:g,reference:h,organizationCampaign:w,productCampaigns:y})=>{let f=null;if("LastCampaign"===h){let a=await (0,d.HK)(l,p,e,e.session.organizationId);f=(0,d.qR)(a??null,r,i.key)??1}else"Benchmark"===h&&(f=(0,d.GY)(w.organizationCampaignKpiBenchmarks,r,p)??1);let C=(0,d.qR)(y,r,i.key);return{id:g,kpiId:r,description:n,name:a,category:i.category,kpi:i,unit:i.unit,productId:p,product:m.name,objective:o,objectiveToShow:(0,s.N)(o),startDate:l,endDate:t,performanceToShow:(0,d.iw)(C,h,f),responsible:u.firstName,responsibleId:c,reference:h}}));return{initiatives:w,total:g}}),getInitiativesModalData:c.U5.query(async({ctx:a})=>{let e=await a.prisma.product.findMany({where:{productCampaigns:{some:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}}}},select:{id:!0,name:!0}}),i=await a.prisma.kpi.findMany({select:{id:!0,name:!0,unit:!0},orderBy:{createdAt:"asc"}}),t=await a.prisma.user.findMany({where:{organizations:{some:{id:a.session.organizationId}}},select:{id:!0,firstName:!0,lastName:!0,email:!0}});return{products:e,kpis:i,orgUsers:t}}),deleteInitiative:c.U5.input(r.z.object({initiativeId:r.z.string()})).mutation(async({ctx:a,input:e})=>{let i=await a.prisma.initiative.delete({where:{id:e.initiativeId}});if(!i)throw new n.TRPCError({code:"NOT_FOUND",message:"Initiative not found or couldn't be deleted."})}),updateInitiative:c.U5.input(r.z.object({initiativeId:r.z.string(),name:r.z.string().optional(),productId:r.z.string().optional(),description:r.z.string().optional().nullable(),kpiId:r.z.string().optional(),objective:r.z.number().optional(),startDate:r.z.date().optional(),endDate:r.z.date().optional(),reference:r.z.enum(["LastCampaign","Benchmark","Custom"]),responsibleId:r.z.string().optional()})).mutation(async({ctx:a,input:e})=>{let{initiativeId:i,...t}=e,r=await a.prisma.organizationCampaign.findMany({where:{organization:{id:{equals:a.session.organizationId}},establishmentCampaigns:{some:{productCampaigns:{some:{productId:e.productId}}}}},orderBy:{startDate:"desc"},take:2});if(!r[0])throw new n.TRPCError({code:"NOT_FOUND",message:"No valid organization campaign was found for the given product in this organization."});if("LastCampaign"===e.reference&&r.length<2)throw new n.TRPCError({code:"NOT_FOUND",message:o.R6});let s=r[0].id;if("Benchmark"===e.reference){let i=await a.prisma.organizationCampaignKpiBenchmark.findFirst({where:{organizationCampaignId:s,kpiId:e.kpiId}});if(!i)throw new n.TRPCError({code:"NOT_FOUND",message:o.SX})}return await a.prisma.initiative.update({where:{id:i},data:{...t,organizationCampaignId:s}})})});t()}catch(a){t(a)}})},7230:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{G:()=>h});var n=i(7490),r=i(3303),o=i(2937),s=i(8432),d=i(9344),c=i.n(d),p=i(9926),m=i(5803),l=i(2601),u=i(8779),g=a([n,o,p,m,l,u]);[n,o,p,m,l,u]=g.then?(await g)():g;let h=(0,l.hA)({getUsers:l.U5.query(async({ctx:a})=>{let e=await a.prisma.user.findMany({where:{organizations:{some:{id:a.session.organizationId}},id:{not:a.session.user.id}}}),i=await a.prisma.invitation.findMany({where:{organizationId:a.session.organizationId,invitationStatus:"Pending"},include:{user:!0}}),t=[a.session.user,...e],n=i.map(a=>a.user),r=[...t.map(a=>({...a,pendingInvite:!1})),...n.map(a=>({...a,pendingInvite:!0}))];return r}),removeUserFromOrganization:l.U5.input(p.z.object({userId:p.z.string()})).mutation(async({ctx:a,input:e})=>{let i=await a.prisma.invitation.findFirst({where:{userId:e.userId,organizationId:a.session.organizationId,invitationStatus:{not:"Revoked"}}});i&&await a.prisma.invitation.update({where:{id:i.id},data:{invitationStatus:"Revoked"}}),await a.prisma.organization.update({where:{id:a.session.organizationId},data:{users:{disconnect:{id:e.userId}}}})}),inviteUser:l.U5.input(p.z.object({email:p.z.string()})).mutation(async({ctx:a,input:e})=>{let i=await a.prisma.user.findUnique({where:{email:e.email},include:{organizations:!0}});if(!i){let i=(0,r.createId)(),t=await (0,s.hash)(i,u.P),o=await a.prisma.kpi.findMany(),d=await a.prisma.user.create({data:{hashedPassword:t,email:e.email,homePageKpis:{connect:o.map(a=>({id:a.id}))}}}),p=await a.prisma.invitation.create({data:{organizationId:a.session.organizationId,userId:d.id}}),l=c().sign({invitationId:p.id},m.O.JWT_SECRET_KEY);return await (0,n.Cz)({to:e.email,subject:"Bienvenido/a a Cacta!",Email:n.k6,emailProps:{organizationName:a.session.organizationCampaign.organization.name,password:i,userName:a.session.user.firstName??a.session.user.email,token:l}})}let t=await a.prisma.invitation.findMany({where:{userId:i.id}});if(t.length>0&&t.some(a=>"Pending"===a.invitationStatus))throw new o.TRPCError({code:"CONFLICT",message:"pendingInvitation"});if(i.organizations.length>0){if(i.organizations[0]?.id===a.session.organizationId)throw new o.TRPCError({code:"CONFLICT",message:"userInThisOrganization"});throw new o.TRPCError({code:"CONFLICT",message:"userInOtherOrganization"})}let d=await a.prisma.invitation.create({data:{organizationId:a.session.organizationId,userId:i.id}}),p={invitationId:d.id},l=c().sign(p,m.O.JWT_SECRET_KEY);await (0,n.Cz)({to:e.email,subject:"Has sido invitado a una organizaci\xf3n en Cacta",Email:n.n_,emailProps:{organizationName:a.session.organizationCampaign.organization.name,userName:a.session.user.firstName??a.session.user.email,invitedUserName:i.firstName??i.email,token:l}})}),acceptInvite:l.$y.input(p.z.object({invitationId:p.z.string()})).mutation(async({ctx:a,input:e})=>{let i=await a.prisma.invitation.findFirst({where:{id:e.invitationId}});if(!i||i?.invitationStatus==="Revoked"||i?.invitationStatus==="Accepted")throw new o.TRPCError({code:"CONFLICT",message:"invalidInvitation"});await a.prisma.invitation.update({where:{id:i.id},data:{invitationStatus:"Accepted"}}),await a.prisma.organization.update({where:{id:i.organizationId},data:{users:{connect:{id:i.userId}}}})})});t()}catch(a){t(a)}})},6933:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{v:()=>s});var n=i(9926),r=i(2601),o=a([n,r]);[n,r]=o.then?(await o)():o;let s=(0,r.hA)({summaryByProduct:r.U5.input(n.default.object({category:n.default.enum(["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"])})).query(async({ctx:a,input:e})=>{let i=await a.prisma.kpi.findMany({where:{category:e.category},include:{organizationCampaignKpiBenchmarks:{where:{organizationCampaignId:a.session.organizationCampaign.id},include:{productKpiBenchmarks:!0}}}}),t=await a.prisma.productKpi.findMany({where:{productCampaign:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},kpi:{category:e.category}},include:{scopes:!0,waterComposition:!0,productCampaign:{include:{product:!0}}}});return{kpiBenchmarks:i,productKpis:t}}),summaryByEstablishment:r.U5.input(n.default.object({category:n.default.enum(["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"])})).query(async({ctx:a,input:{category:e}})=>{let i=await a.prisma.establishmentCampaign.findMany({where:{organizationCampaignId:a.session.organizationCampaign.id},include:{establishment:!0,productCampaigns:{include:{product:!0,productKpis:{include:{kpi:!0,scopes:!0,waterComposition:!0},where:{kpi:{category:e}},orderBy:{kpi:{createdAt:"asc"}}}}}}});return i})});t()}catch(a){t(a)}})},8987:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{j:()=>c});var n=i(2937),r=i(9926),o=i(3411),s=i(2601),d=a([n,r,s]);[n,r,s]=d.then?(await d)():d;let c=(0,s.hA)({productsAndCampaignsList:s.U5.query(async({ctx:a})=>{let e=await a.prisma.organizationCampaign.findMany({where:{organizationId:a.session.organizationId},orderBy:{startDate:"desc"}});if(!e)throw new n.TRPCError({code:"NOT_FOUND"});let i=await Promise.all(e.map(async e=>{let i=await a.prisma.product.findMany({where:{productCampaigns:{every:{endDate:{not:null},harvestedAmount:{not:null}},some:{establishmentCampaign:{organizationCampaignId:e.id}}}},select:{id:!0,name:!0}}),t=await a.prisma.product.count({where:{productCampaigns:{some:{establishmentCampaign:{organizationCampaignId:e.id}}}}});return{id:e.id,startDate:e.startDate,endDate:e.endDate,products:i,totalProducts:t}}));return i}),ecoScoreData:s.U5.input(r.default.object({productId:r.default.string().optional(),organizationCampaignId:r.default.string().optional()})).query(async({ctx:a,input:e})=>{let i=await a.prisma.organizationCampaign.findMany({where:{organizationId:a.session.organizationId},orderBy:{startDate:"desc"},select:{id:!0}}),t=i.findIndex(a=>a.id===e.organizationCampaignId)+1,n=i[t]?.id,r=await a.prisma.kpiScore.findMany({where:{organizationCampaignScore:{organizationCampaignId:e.organizationCampaignId,productId:e.productId??null}},include:{kpi:!0},orderBy:{kpi:{createdAt:"asc"}}}),o=n?await a.prisma.kpiScore.findMany({where:{organizationCampaignScore:{organizationCampaignId:n,productId:e.productId??null}},include:{kpi:!0}}):[],s=["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"].map(a=>({categoryKey:a,kpiResults:r.filter(e=>e.kpi.category===a).map(a=>({kpiId:a.kpiId,kpiName:a.kpi.name,ecoScoreValue:a.ecoScoreValue,ecoScoreGrade:a.ecoScoreGrade,previousCampaignGrade:o.find(e=>e.kpiId===a.kpiId)?.ecoScoreGrade}))})),d=await a.prisma.organizationCampaignScore.findFirst({where:{organizationCampaignId:e.organizationCampaignId,productId:e.productId??null}});return{kpiEcoScores:s,totalEcoScore:d}}),getProductScore:s.U5.input(r.default.object({pageSize:r.default.number().optional(),pageIndex:r.default.number().optional(),searchQuery:r.default.string().nullish(),locale:r.default.string().nullish()})).query(async({ctx:a,input:{pageIndex:e,pageSize:i,searchQuery:t,locale:n}})=>{let r=t?await a.prisma.$queryRaw`
        SELECT pc."id" FROM "ProductCampaign" as pc
        JOIN "Product" as p ON pc."productId" = p."id"
        WHERE unaccent(p."name"->>${n||"en"}) ilike unaccent(${`%${t}%`})`:null,o=r?{id:{in:r.map(({id:a})=>a)}}:{},s=(await a.prisma.product.findMany({where:{productCampaigns:{some:{establishmentCampaign:{organizationCampaignId:a.session.organizationCampaign.id}},every:{endDate:{not:null}}}}})).map(a=>a.id),d={...o,establishmentCampaign:{organizationCampaign:{organizationId:a.session.organizationId}},endDate:{not:null},productId:{in:s}},c=await a.prisma.productCampaign.count({where:d}),p=await a.prisma.productCampaign.findMany({where:d,select:{id:!0,product:{select:{id:!0,name:!0,cpcId:!0,cpcName:!0}},startDate:!0,endDate:!0,establishmentCampaign:{select:{organizationCampaign:{select:{id:!0,startDate:!0,endDate:!0,projectId:!0}}}}},skip:"number"==typeof e&&i?e*i:void 0,take:i}),m=p.reduce((a,e)=>{let i=a.find(a=>a.product.id===e.product.id&&a.organizationCampaignId===e.establishmentCampaign.organizationCampaign.id);return i?(i.startDate=new Date(Math.min(new Date(i.startDate).getTime(),new Date(e.startDate).getTime())),i.endDate=new Date(Math.max(new Date(i.endDate??"").getTime(),new Date(e.endDate??"").getTime()))):a.push({product:e.product,startDate:e.startDate,endDate:e.endDate,organizationCampaignId:e.establishmentCampaign.organizationCampaign.id,projectId:e.establishmentCampaign.organizationCampaign.projectId}),a},[]);return{productCampaigns:Object.values(m),total:c}}),getActivityInputsByProduct:s.U5.input(r.default.object({organizationCampaignId:r.default.string(),productId:r.default.string()})).query(async({ctx:a,input:{organizationCampaignId:e,productId:i}})=>{let t=await a.prisma.productCampaign.findMany({where:{establishmentCampaign:{organizationCampaignId:e},productId:i},select:{productKpis:{select:{activityProductKpis:{select:{activityInputs:!0}},kpi:!0},orderBy:{kpi:{createdAt:"asc"}}},harvestedAmount:!0}}),n=t.reduce((a,{harvestedAmount:e})=>a+=e??0,0),r=t.reduce((a,e)=>(e.productKpis.forEach(e=>{let{id:i,name:t,category:n,unit:r,key:o}=e.kpi;a[i]||(a[i]={kpiName:t,kpiKey:o,category:n,unit:r,totals:{upstream:0,core:0,transportation:0,downstream:0,totalValue:0}}),e.activityProductKpis.forEach(({activityInputs:e})=>{e.forEach(e=>{let t=a[i];t&&(t.totals.upstream+=e.upstream,t.totals.core+=e.core,t.totals.transportation+=e.transportation,t.totals.downstream+=e.downstream,t.totals.totalValue+=e.totalValue)})})}),a),{}),s=Object.values(r).reduce((a,e)=>{let i=a.find(a=>a.categoryName===e.category);return i?i.kpis.push(e):a.push({categoryName:e.category,kpis:[e]}),a},[]),d=["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"];s.sort((a,e)=>d.indexOf(a.categoryName)-d.indexOf(e.categoryName));let c=s.map(a=>({categoryName:a.categoryName,kpis:a.kpis.map(a=>({...a,totals:{upstream:(0,o.N)(a.totals.upstream/(1e3*n),3),core:(0,o.N)((a.totals.core+a.totals.transportation)/(1e3*n),3),downstream:(0,o.N)(a.totals.downstream/(1e3*n),3),totalValue:(0,o.N)(a.totals.totalValue/(1e3*n),3)}}))}));return c})});t()}catch(a){t(a)}})},6212:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{N:()=>p});var n=i(2937),r=i(9926),o=i(7865),s=i(606),d=i(2601),c=a([n,r,o,s,d]);[n,r,o,s,d]=c.then?(await c)():c;let p=(0,d.hA)({editProfile:d.U5.input(r.z.object({profilePictureUrl:r.z.object({name:r.z.string(),data:r.z.string()}).nullable().optional(),firstName:r.z.string().optional().nullable(),lastName:r.z.string().optional().nullable()})).mutation(async({ctx:a,input:{profilePictureUrl:e,firstName:i,lastName:t}})=>{let n=a.session.user.id,r=e?.name,d=e?.name===a.session.user.profilePictureUrl;return e&&!d&&(r=await (0,s.H)(e)),!a.session.user.profilePictureUrl||d&&e||await (0,o.i)(a.session.user.profilePictureUrl),await a.prisma.user.update({where:{id:n},data:{firstName:i,lastName:t,profilePictureUrl:r??null},include:{organizations:!0}})}),kpis:d.U5.query(async({ctx:a})=>{let e=a.session.user.id,i=await a.prisma.user.findUnique({where:{id:e},select:{homePageKpis:!0}});if(!i)throw new n.TRPCError({code:"NOT_FOUND"});let t=await a.prisma.kpi.findMany(),r=(await a.prisma.organizationCampaignKpiBenchmark.findMany({where:{organizationCampaignId:a.session.organizationCampaign.id},select:{kpiId:!0}})).map(a=>a.kpiId),o=["ClimateChange","EcosystemQuality","HumanHealth","ResourcesExhaustion"].map(a=>({categoryKey:a,kpis:t.filter(e=>e.category===a).map(a=>({...a,enabled:r.includes(a.id)}))}));return{userKpis:i.homePageKpis,kpisByCategory:o}}),removeKpi:d.U5.input(r.z.object({kpiId:r.z.string()})).mutation(async({ctx:a,input:e})=>{let i=a.session.user.id;await a.prisma.user.update({where:{id:i},data:{homePageKpis:{disconnect:{id:e.kpiId}}}})}),addKpi:d.U5.input(r.z.object({kpiId:r.z.string()})).mutation(async({ctx:a,input:e})=>{let i=a.session.user.id;await a.prisma.user.update({where:{id:i},data:{homePageKpis:{connect:{id:e.kpiId}}}})}),reset:d.U5.mutation(async({ctx:a})=>{let e=a.session.user.id,i=await a.prisma.kpi.findMany();await a.prisma.user.update({where:{id:e},data:{homePageKpis:{connect:i.map(a=>({id:a.id}))}}})})});t()}catch(a){t(a)}})},2601:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{$y:()=>u,U5:()=>g,hA:()=>m}),i(5237);var n=i(2937),r=i(72),o=i.n(r),s=i(9926),d=i(5462),c=a([n,s,d]);[n,s,d]=c.then?(await c)():c;let p=n.initTRPC.context().create({transformer:o(),errorFormatter:({shape:a,error:e})=>({...a,data:{...a.data,zodError:e.cause instanceof s.ZodError?e.cause.flatten():null}})}),m=p.router,l=p.middleware(async({ctx:a,next:e})=>{if(!a.session||!a.session.user)throw new n.TRPCError({code:"UNAUTHORIZED"});let i=a.session.user.id,t=await a.prisma.user.findUnique({where:{id:i},select:{organizations:!0}});if(!t)throw new n.TRPCError({code:"UNAUTHORIZED"});let r=t.organizations[0]?.id;if(!r)throw new n.TRPCError({code:"UNAUTHORIZED"});let o=await a.prisma.organizationCampaign.findFirst({where:{organizationId:r},orderBy:{startDate:"desc"},include:{organization:!0}});if(!o)throw new n.TRPCError({code:"NOT_FOUND"});return e({ctx:{session:{...a.session,user:a.session.user,organizationId:r,organizationCampaign:o}}})}),u=p.procedure,g=p.procedure.use(l);t()}catch(a){t(a)}})},2836:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{x:()=>getTrpcHelpers});var n=i(5468),r=i(72),o=i.n(r),s=i(1161),d=i(5462),c=i(5237),p=a([n,s,d]);[n,s,d]=p.then?(await p)():p;let getTrpcHelpers=async a=>{let e=await (0,d.W)(a),i=(0,n.createServerSideHelpers)({router:s.q,ctx:{prisma:c.prisma,session:e},transformer:o()});return i};t()}catch(a){t(a)}})},7865:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{i:()=>deleteFromImageBucket});var n=i(1841),r=i(5803),o=i(8466),s=a([r,o]);[r,o]=s.then?(await s)():s;let deleteFromImageBucket=async a=>{let e=(0,o.g)(),i=a.split("/"),t=i[i.length-1],s=new n.DeleteObjectCommand({Bucket:r.O.IMAGE_BUCKET_NAME,Key:t});await e.send(s)};t()}catch(a){t(a)}})},8466:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{g:()=>getS3Client});var n=i(1841),r=i(5803),o=a([r]);r=(o.then?(await o)():o)[0];let getS3Client=()=>process.env.IS_OFFLINE?new n.S3Client({endpoint:"http://localhost:9000",region:"us-east-1",forcePathStyle:!0,credentials:{accessKeyId:r.O.IMAGE_BUCKET_ACCESS_KEY_ID,secretAccessKey:r.O.IMAGE_BUCKET_SECRET_ACCESS_KEY}}):new n.S3Client({region:r.O.IMAGE_BUCKET_AWS_REGION||"us-east-1",forcePathStyle:!0,credentials:{accessKeyId:r.O.IMAGE_BUCKET_ACCESS_KEY_ID,secretAccessKey:r.O.IMAGE_BUCKET_SECRET_ACCESS_KEY}});t()}catch(a){t(a)}})},606:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{H:()=>uploadToImageBucket});var n=i(1841),r=i(3303),o=i(2937),s=i(9926),d=i(5803),c=i(8466),p=a([o,s,d,c]);[o,s,d,c]=p.then?(await p)():p;let m=s.z.enum(["jpg","jpeg","png","gif"]),l={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif"},uploadToImageBucket=async a=>{let e=a.name.split(".").pop(),i=m.safeParse(e);if(!i.success)throw new o.TRPCError({code:"UNPROCESSABLE_CONTENT"});let t=i.data,s=`${(0,r.createId)()}.${t}`,p=new n.PutObjectCommand({Bucket:d.O.IMAGE_BUCKET_NAME,Key:s,ContentType:l[t],Body:Buffer.from(a.data.replace(/data:image\/\w+;base64,/,""),"base64")}),u=(0,c.g)();await u.send(p);let g=`${d.O.NEXT_PUBLIC_IMAGE_BUCKET_BASE_URL}/${s}`;return g};t()}catch(a){t(a)}})},4631:(a,e,i)=>{i.d(e,{CV:()=>t,R6:()=>n,SX:()=>r});let t="Error: Incorrect password",n="Error: At least two organization campaigns are required for comparison vs last campaign reference.",r="Error: There is no benchmark for selected kpi for comparison vs benchmark reference."},3411:(a,e,i)=>{i.d(e,{N:()=>round});let round=(a,e=1,i=!1)=>1e6>Math.abs(a)&&Math.abs(a)>=1||0===a?a.toLocaleString("en",{minimumFractionDigits:e,maximumFractionDigits:e}):i?"< 1.0":a.toExponential(2)},4342:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{O:()=>s});var n=i(3594),r=i(9926),o=a([n,r]);[n,r]=o.then?(await o)():o;let s=(0,n.createEnv)({server:{SES_ACCESS_KEY:r.z.string(),SES_SECRET_ACCESS_KEY:r.z.string(),SES_EMAIL_REGION:r.z.string().optional(),USE_SES:r.z.enum(["true","false"]),EMAIL_HOST:r.z.string().optional(),EMAIL_PORT:r.z.string().optional(),EMAIL_USERNAME:r.z.string().optional(),EMAIL_PASSWORD:r.z.string().optional(),EMAIL_SENDER:r.z.string()},clientPrefix:"NEXT_PUBLIC_",client:{NEXT_PUBLIC_BASE_URL:r.z.string()},skipValidation:"true"===process.env.IS_CI,runtimeEnv:process.env});t()}catch(a){t(a)}})},7490:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{Cz:()=>n.C,k6:()=>r.k6,n_:()=>r.n_});var n=i(9543),r=i(7587),o=a([n,r]);[n,r]=o.then?(await o)():o,t()}catch(a){t(a)}})},5971:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{h:()=>getTransport});var n=i(4298),r=i(5184),o=i.n(r),s=i(4342),d=a([s]);s=(d.then?(await d)():d)[0];let SESTransport=()=>{let a=new n.SES({credentials:{accessKeyId:s.O.SES_ACCESS_KEY,secretAccessKey:s.O.SES_SECRET_ACCESS_KEY},region:s.O.SES_EMAIL_REGION??"us-east-2"});return o().createTransport({SES:{aws:n,ses:a}})},developmentTransport=()=>o().createTransport({host:s.O.EMAIL_HOST,port:parseInt(s.O.EMAIL_PORT??"1025"),auth:{user:s.O.EMAIL_USERNAME,pass:s.O.EMAIL_PASSWORD}}),getTransport=()=>"true"===s.O.USE_SES?SESTransport():developmentTransport();t()}catch(a){t(a)}})},9543:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{C:()=>sendEmail});var n=i(8816),r=i(4342),o=i(5971),s=a([n,r,o]);[n,r,o]=s.then?(await s)():s;let sendEmail=async({to:a,subject:e,Email:i,emailProps:t})=>{let s=(0,o.h)(),d=(0,n.render)(i(t));await s.sendMail({from:r.O.EMAIL_SENDER,to:a,subject:e,html:d})};t()}catch(a){t(a)}})},9856:(a,e,i)=>{i.a(a,async(a,e)=>{try{i(997),i(6689);var t=i(7717),n=i(4342),r=a([t,n]);[t,n]=r.then?(await r)():r,e()}catch(a){e(a)}})},5455:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var n=i(997);i(6689);var r=i(7717),o=i(4342),s=a([r,o]);[r,o]=s.then?(await s)():s;let __WEBPACK_DEFAULT_EXPORT__=({userName:a,password:e,organizationName:i,token:t})=>n.jsx(r.Tailwind,{children:(0,n.jsxs)(r.Html,{children:[n.jsx(r.Head,{children:n.jsx(r.Font,{fontFamily:"Poppins",fallbackFontFamily:"Verdana",webFont:{url:"https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1xlFd2JQEk.woff2",format:"woff2"}})}),n.jsx(r.Preview,{children:"Bienvenido/a a Cacta"}),n.jsx(r.Body,{children:n.jsx(r.Container,{className:"mx-auto my-0 mb-16 bg-white pb-12 pt-5",children:(0,n.jsxs)(r.Section,{children:[n.jsx(r.Section,{className:"mb-10 flex w-full justify-center",children:n.jsx(r.Img,{src:`${o.O.NEXT_PUBLIC_BASE_URL}/icons/logoBlackLetters.svg`,alt:"Cacta",width:240,height:70})}),n.jsx(r.Text,{className:"mb-8 font-primary text-sm font-normal not-italic leading-4",children:"Bienvenido/a a Cacta!"}),(0,n.jsxs)(r.Text,{className:"mb-8 text-justify text-sm font-normal not-italic",children:[n.jsx("span",{className:"text-[#8e33ff]",children:a})," te ha invitado a unirte a la organizaci\xf3n ",n.jsx("span",{className:"text-[#8e33ff]",children:i}),' en Cacta. Para aceptar la invitaci\xf3n has click en "Confirmar".']}),(0,n.jsxs)(r.Text,{className:"mb-10 text-justify text-sm font-extrabold not-italic",children:["Tu contrase\xf1a temporal es: ",n.jsx("span",{className:"text-[#8e33ff]",children:e}),n.jsx("br",{})," Ser\xe1s redirigido para cambiar tu contrase\xf1a luego de ingresar por primera vez a la plataforma."]}),n.jsx(r.Button,{className:"flex w-full items-center justify-center rounded-lg bg-[#8e33ff] p-3 text-center font-secondary text-sm font-medium leading-5 text-white ring-offset-background transition-colors focus-visible:outline-none",href:`${o.O.NEXT_PUBLIC_BASE_URL}/confirm-invite?token=${t}`,children:"Confirmar"})]})})})]})});t()}catch(a){t(a)}})},3273:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var n=i(997);i(6689);var r=i(7717),o=i(846),s=i(4116),d=i(4342),c=a([r,o,s,d]);[r,o,s,d]=c.then?(await c)():c;let __WEBPACK_DEFAULT_EXPORT__=({userName:a,organizationName:e,invitedUserName:i,token:t})=>n.jsx(r.Tailwind,{children:(0,n.jsxs)(r.Html,{children:[n.jsx(s.Head,{children:n.jsx(o.Font,{fontFamily:"Poppins",fallbackFontFamily:"Verdana",webFont:{url:"https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1xlFd2JQEk.woff2",format:"woff2"}})}),n.jsx(r.Preview,{children:"Has sido invitado a una organizaci\xf3n en Cacta"}),n.jsx(r.Body,{children:n.jsx(r.Container,{className:"mx-auto my-0 mb-16 bg-white pb-12 pt-5",children:(0,n.jsxs)(r.Section,{children:[n.jsx(r.Section,{className:"mb-10 flex w-full justify-center",children:n.jsx(r.Img,{src:`${d.O.NEXT_PUBLIC_BASE_URL}/icons/logoBlackLetters.svg`,alt:"Cacta",width:240,height:70})}),(0,n.jsxs)(r.Text,{className:"mb-8 font-primary text-sm font-normal not-italic leading-4",children:["Hola ",i,"!"]}),(0,n.jsxs)(r.Text,{className:"mb-8 text-justify text-sm font-normal not-italic",children:[n.jsx("span",{className:"text-[#8e33ff]",children:a})," te ha invitado a unirte a la organizaci\xf3n ",n.jsx("span",{className:"text-[#8e33ff]",children:e}),' en Cacta. Para aceptar la invitaci\xf3n, haz clic en "Confirmar".']}),n.jsx(r.Button,{className:"inline-flex w-full items-center justify-center rounded-lg bg-[#8e33ff] p-3 text-center font-secondary text-sm font-medium leading-5 text-white ring-offset-background transition-colors focus-visible:outline-none",href:`${d.O.NEXT_PUBLIC_BASE_URL}/confirm-invite?token=${t}`,children:"Confirmar"})]})})})]})});t()}catch(a){t(a)}})},7587:(a,e,i)=>{i.a(a,async(a,t)=>{try{i.d(e,{k6:()=>r.Z,n_:()=>o.Z});var n=i(9856),r=i(5455),o=i(3273),s=a([n,r,o]);[n,r,o]=s.then?(await s)():s,t()}catch(a){t(a)}})}};